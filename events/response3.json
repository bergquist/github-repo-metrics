[{"id":"7452354464","type":"IssuesEvent","actor":{"id":11000915,"login":"pf23","display_login":"pf23","gravatar_id":"","url":"https://api.github.com/users/pf23","avatar_url":"https://avatars.githubusercontent.com/u/11000915?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"action":"closed","issue":{"url":"https://api.github.com/repos/grafana/grafana/issues/11362","repository_url":"https://api.github.com/repos/grafana/grafana","labels_url":"https://api.github.com/repos/grafana/grafana/issues/11362/labels{/name}","comments_url":"https://api.github.com/repos/grafana/grafana/issues/11362/comments","events_url":"https://api.github.com/repos/grafana/grafana/issues/11362/events","html_url":"https://github.com/grafana/grafana/issues/11362","id":307961758,"number":11362,"title":"HTTP api always based on primary key ","user":{"login":"pf23","id":11000915,"avatar_url":"https://avatars1.githubusercontent.com/u/11000915?v=4","gravatar_id":"","url":"https://api.github.com/users/pf23","html_url":"https://github.com/pf23","followers_url":"https://api.github.com/users/pf23/followers","following_url":"https://api.github.com/users/pf23/following{/other_user}","gists_url":"https://api.github.com/users/pf23/gists{/gist_id}","starred_url":"https://api.github.com/users/pf23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pf23/subscriptions","organizations_url":"https://api.github.com/users/pf23/orgs","repos_url":"https://api.github.com/users/pf23/repos","events_url":"https://api.github.com/users/pf23/events{/privacy}","received_events_url":"https://api.github.com/users/pf23/received_events","type":"User","site_admin":false},"labels":[{"id":276509807,"url":"https://api.github.com/repos/grafana/grafana/labels/comp:%20backend/db","name":"comp: backend/db","color":"c7def8","default":false},{"id":120793823,"url":"https://api.github.com/repos/grafana/grafana/labels/state:%20needs%20more%20detail","name":"state: needs more detail","color":"1d76db","default":false},{"id":70176318,"url":"https://api.github.com/repos/grafana/grafana/labels/type:%20bug","name":"type: bug","color":"b60205","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/grafana/grafana/milestones/76","html_url":"https://github.com/grafana/grafana/milestone/76","labels_url":"https://api.github.com/repos/grafana/grafana/milestones/76/labels","id":2863993,"number":76,"title":"5.1","description":"","creator":{"login":"torkelo","id":10999,"avatar_url":"https://avatars3.githubusercontent.com/u/10999?v=4","gravatar_id":"","url":"https://api.github.com/users/torkelo","html_url":"https://github.com/torkelo","followers_url":"https://api.github.com/users/torkelo/followers","following_url":"https://api.github.com/users/torkelo/following{/other_user}","gists_url":"https://api.github.com/users/torkelo/gists{/gist_id}","starred_url":"https://api.github.com/users/torkelo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/torkelo/subscriptions","organizations_url":"https://api.github.com/users/torkelo/orgs","repos_url":"https://api.github.com/users/torkelo/repos","events_url":"https://api.github.com/users/torkelo/events{/privacy}","received_events_url":"https://api.github.com/users/torkelo/received_events","type":"User","site_admin":false},"open_issues":29,"closed_issues":52,"state":"open","created_at":"2017-10-25T06:41:05Z","updated_at":"2018-03-29T08:04:41Z","due_on":null,"closed_at":null},"comments":11,"created_at":"2018-03-23T09:48:07Z","updated_at":"2018-03-29T08:04:41Z","closed_at":"2018-03-29T08:04:41Z","author_association":"NONE","body":"### What Grafana version are you using?\r\nGrafana v5.0\r\n\r\n### What datasource are you using?\r\nInfluxDB\r\n\r\n### What OS are you running grafana on?\r\nCentOS 7\r\n\r\n### What did you do?\r\nCreated a dashboard without `uid`. It is impossible to delete it via HTTP APIs because method `DELETE /api/dashboards/uid/:uid` is the only one to delete a dashboard and you must provide its `uid`.\r\n\r\nHere are keys of table `dashboard`  with `id` being the primary key and `uid` being a normal one. \r\n\r\n| Field | Type  |   Null |    Key    |\r\n|:----:|:------:|:-----:|:--------:|\r\n| id  |  bigint(20)| NO |   PRI   |\r\n| uid | varchar(40) | YES |  |\r\n\r\nTo avoid any above situation, my suggestion is that most HTTP APIs support methods based on primary key or a non-repeatable  key, under which the only way to operate the dashboard is to modify database directly.\r\n\r\n\r\n\r\n\r\n\r\n\r\n \r\n"}},"public":true,"created_at":"2018-03-29T08:04:41Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7452353715","type":"IssueCommentEvent","actor":{"id":11000915,"login":"pf23","display_login":"pf23","gravatar_id":"","url":"https://api.github.com/users/pf23","avatar_url":"https://avatars.githubusercontent.com/u/11000915?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/grafana/grafana/issues/11362","repository_url":"https://api.github.com/repos/grafana/grafana","labels_url":"https://api.github.com/repos/grafana/grafana/issues/11362/labels{/name}","comments_url":"https://api.github.com/repos/grafana/grafana/issues/11362/comments","events_url":"https://api.github.com/repos/grafana/grafana/issues/11362/events","html_url":"https://github.com/grafana/grafana/issues/11362","id":307961758,"number":11362,"title":"HTTP api always based on primary key ","user":{"login":"pf23","id":11000915,"avatar_url":"https://avatars1.githubusercontent.com/u/11000915?v=4","gravatar_id":"","url":"https://api.github.com/users/pf23","html_url":"https://github.com/pf23","followers_url":"https://api.github.com/users/pf23/followers","following_url":"https://api.github.com/users/pf23/following{/other_user}","gists_url":"https://api.github.com/users/pf23/gists{/gist_id}","starred_url":"https://api.github.com/users/pf23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pf23/subscriptions","organizations_url":"https://api.github.com/users/pf23/orgs","repos_url":"https://api.github.com/users/pf23/repos","events_url":"https://api.github.com/users/pf23/events{/privacy}","received_events_url":"https://api.github.com/users/pf23/received_events","type":"User","site_admin":false},"labels":[{"id":276509807,"url":"https://api.github.com/repos/grafana/grafana/labels/comp:%20backend/db","name":"comp: backend/db","color":"c7def8","default":false},{"id":120793823,"url":"https://api.github.com/repos/grafana/grafana/labels/state:%20needs%20more%20detail","name":"state: needs more detail","color":"1d76db","default":false},{"id":70176318,"url":"https://api.github.com/repos/grafana/grafana/labels/type:%20bug","name":"type: bug","color":"b60205","default":false}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/grafana/grafana/milestones/76","html_url":"https://github.com/grafana/grafana/milestone/76","labels_url":"https://api.github.com/repos/grafana/grafana/milestones/76/labels","id":2863993,"number":76,"title":"5.1","description":"","creator":{"login":"torkelo","id":10999,"avatar_url":"https://avatars3.githubusercontent.com/u/10999?v=4","gravatar_id":"","url":"https://api.github.com/users/torkelo","html_url":"https://github.com/torkelo","followers_url":"https://api.github.com/users/torkelo/followers","following_url":"https://api.github.com/users/torkelo/following{/other_user}","gists_url":"https://api.github.com/users/torkelo/gists{/gist_id}","starred_url":"https://api.github.com/users/torkelo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/torkelo/subscriptions","organizations_url":"https://api.github.com/users/torkelo/orgs","repos_url":"https://api.github.com/users/torkelo/repos","events_url":"https://api.github.com/users/torkelo/events{/privacy}","received_events_url":"https://api.github.com/users/torkelo/received_events","type":"User","site_admin":false},"open_issues":30,"closed_issues":51,"state":"open","created_at":"2017-10-25T06:41:05Z","updated_at":"2018-03-29T04:08:21Z","due_on":null,"closed_at":null},"comments":10,"created_at":"2018-03-23T09:48:07Z","updated_at":"2018-03-29T08:04:32Z","closed_at":null,"author_association":"NONE","body":"### What Grafana version are you using?\r\nGrafana v5.0\r\n\r\n### What datasource are you using?\r\nInfluxDB\r\n\r\n### What OS are you running grafana on?\r\nCentOS 7\r\n\r\n### What did you do?\r\nCreated a dashboard without `uid`. It is impossible to delete it via HTTP APIs because method `DELETE /api/dashboards/uid/:uid` is the only one to delete a dashboard and you must provide its `uid`.\r\n\r\nHere are keys of table `dashboard`  with `id` being the primary key and `uid` being a normal one. \r\n\r\n| Field | Type  |   Null |    Key    |\r\n|:----:|:------:|:-----:|:--------:|\r\n| id  |  bigint(20)| NO |   PRI   |\r\n| uid | varchar(40) | YES |  |\r\n\r\nTo avoid any above situation, my suggestion is that most HTTP APIs support methods based on primary key or a non-repeatable  key, under which the only way to operate the dashboard is to modify database directly.\r\n\r\n\r\n\r\n\r\n\r\n\r\n \r\n"},"comment":{"url":"https://api.github.com/repos/grafana/grafana/issues/comments/377156420","html_url":"https://github.com/grafana/grafana/issues/11362#issuecomment-377156420","issue_url":"https://api.github.com/repos/grafana/grafana/issues/11362","id":377156420,"user":{"login":"pf23","id":11000915,"avatar_url":"https://avatars1.githubusercontent.com/u/11000915?v=4","gravatar_id":"","url":"https://api.github.com/users/pf23","html_url":"https://github.com/pf23","followers_url":"https://api.github.com/users/pf23/followers","following_url":"https://api.github.com/users/pf23/following{/other_user}","gists_url":"https://api.github.com/users/pf23/gists{/gist_id}","starred_url":"https://api.github.com/users/pf23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pf23/subscriptions","organizations_url":"https://api.github.com/users/pf23/orgs","repos_url":"https://api.github.com/users/pf23/repos","events_url":"https://api.github.com/users/pf23/events{/privacy}","received_events_url":"https://api.github.com/users/pf23/received_events","type":"User","site_admin":false},"created_at":"2018-03-29T08:04:32Z","updated_at":"2018-03-29T08:04:32Z","author_association":"NONE","body":"Yeah, It works. Did not realize that I should execute the statement after migration. Much appreciated! @marefr. "}},"public":true,"created_at":"2018-03-29T08:04:32Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7452293531","type":"PullRequestReviewCommentEvent","actor":{"id":291750,"login":"roidelapluie","display_login":"roidelapluie","gravatar_id":"","url":"https://api.github.com/users/roidelapluie","avatar_url":"https://avatars.githubusercontent.com/u/291750?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/grafana/grafana/pulls/comments/177976819","pull_request_review_id":107952523,"id":177976819,"diff_hunk":"@@ -606,6 +606,43 @@ describe('PrometheusDatasource', function() {\n   });\n });\n \n+describe('Prometheus regular escaping', function() {","path":"public/app/plugins/datasource/prometheus/specs/datasource_specs.ts","position":null,"original_position":13,"commit_id":"1f1719c49822d2a43f225143bb6d389408ad7b43","original_commit_id":"3ee8b76c082d2a57c0945f7e96a85fe675131dcd","user":{"login":"roidelapluie","id":291750,"avatar_url":"https://avatars2.githubusercontent.com/u/291750?v=4","gravatar_id":"","url":"https://api.github.com/users/roidelapluie","html_url":"https://github.com/roidelapluie","followers_url":"https://api.github.com/users/roidelapluie/followers","following_url":"https://api.github.com/users/roidelapluie/following{/other_user}","gists_url":"https://api.github.com/users/roidelapluie/gists{/gist_id}","starred_url":"https://api.github.com/users/roidelapluie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roidelapluie/subscriptions","organizations_url":"https://api.github.com/users/roidelapluie/orgs","repos_url":"https://api.github.com/users/roidelapluie/repos","events_url":"https://api.github.com/users/roidelapluie/events{/privacy}","received_events_url":"https://api.github.com/users/roidelapluie/received_events","type":"User","site_admin":false},"body":"done! :)","created_at":"2018-03-29T07:50:59Z","updated_at":"2018-03-29T07:50:59Z","html_url":"https://github.com/grafana/grafana/pull/11399#discussion_r177976819","pull_request_url":"https://api.github.com/repos/grafana/grafana/pulls/11399","author_association":"CONTRIBUTOR","_links":{"self":{"href":"https://api.github.com/repos/grafana/grafana/pulls/comments/177976819"},"html":{"href":"https://github.com/grafana/grafana/pull/11399#discussion_r177976819"},"pull_request":{"href":"https://api.github.com/repos/grafana/grafana/pulls/11399"}},"in_reply_to_id":177974253},"pull_request":{"url":"https://api.github.com/repos/grafana/grafana/pulls/11399","id":177756425,"html_url":"https://github.com/grafana/grafana/pull/11399","diff_url":"https://github.com/grafana/grafana/pull/11399.diff","patch_url":"https://github.com/grafana/grafana/pull/11399.patch","issue_url":"https://api.github.com/repos/grafana/grafana/issues/11399","number":11399,"state":"open","locked":false,"title":"Fix #10555 #6888 Backslash in Prometheus variables","user":{"login":"roidelapluie","id":291750,"avatar_url":"https://avatars2.githubusercontent.com/u/291750?v=4","gravatar_id":"","url":"https://api.github.com/users/roidelapluie","html_url":"https://github.com/roidelapluie","followers_url":"https://api.github.com/users/roidelapluie/followers","following_url":"https://api.github.com/users/roidelapluie/following{/other_user}","gists_url":"https://api.github.com/users/roidelapluie/gists{/gist_id}","starred_url":"https://api.github.com/users/roidelapluie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roidelapluie/subscriptions","organizations_url":"https://api.github.com/users/roidelapluie/orgs","repos_url":"https://api.github.com/users/roidelapluie/repos","events_url":"https://api.github.com/users/roidelapluie/events{/privacy}","received_events_url":"https://api.github.com/users/roidelapluie/received_events","type":"User","site_admin":false},"body":"Prior this commit, `C:\\bar` was escaped `C:\\\\\\bar`. Should be `C:\\\\\\\\bar`.\r\n\r\nSigned-off-by: Julien Pivotto <roidelapluie@inuits.eu>\r\n","created_at":"2018-03-27T14:20:31Z","updated_at":"2018-03-29T07:50:59Z","closed_at":null,"merged_at":null,"merge_commit_sha":"baebd9c870044f5f4c1940a116d2ba4f1b1db71b","assignee":null,"assignees":[],"requested_reviewers":[],"requested_teams":[],"labels":[],"milestone":null,"commits_url":"https://api.github.com/repos/grafana/grafana/pulls/11399/commits","review_comments_url":"https://api.github.com/repos/grafana/grafana/pulls/11399/comments","review_comment_url":"https://api.github.com/repos/grafana/grafana/pulls/comments{/number}","comments_url":"https://api.github.com/repos/grafana/grafana/issues/11399/comments","statuses_url":"https://api.github.com/repos/grafana/grafana/statuses/1f1719c49822d2a43f225143bb6d389408ad7b43","head":{"label":"roidelapluie:promba","ref":"promba","sha":"1f1719c49822d2a43f225143bb6d389408ad7b43","user":{"login":"roidelapluie","id":291750,"avatar_url":"https://avatars2.githubusercontent.com/u/291750?v=4","gravatar_id":"","url":"https://api.github.com/users/roidelapluie","html_url":"https://github.com/roidelapluie","followers_url":"https://api.github.com/users/roidelapluie/followers","following_url":"https://api.github.com/users/roidelapluie/following{/other_user}","gists_url":"https://api.github.com/users/roidelapluie/gists{/gist_id}","starred_url":"https://api.github.com/users/roidelapluie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roidelapluie/subscriptions","organizations_url":"https://api.github.com/users/roidelapluie/orgs","repos_url":"https://api.github.com/users/roidelapluie/repos","events_url":"https://api.github.com/users/roidelapluie/events{/privacy}","received_events_url":"https://api.github.com/users/roidelapluie/received_events","type":"User","site_admin":false},"repo":{"id":18760286,"name":"grafana","full_name":"roidelapluie/grafana","owner":{"login":"roidelapluie","id":291750,"avatar_url":"https://avatars2.githubusercontent.com/u/291750?v=4","gravatar_id":"","url":"https://api.github.com/users/roidelapluie","html_url":"https://github.com/roidelapluie","followers_url":"https://api.github.com/users/roidelapluie/followers","following_url":"https://api.github.com/users/roidelapluie/following{/other_user}","gists_url":"https://api.github.com/users/roidelapluie/gists{/gist_id}","starred_url":"https://api.github.com/users/roidelapluie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roidelapluie/subscriptions","organizations_url":"https://api.github.com/users/roidelapluie/orgs","repos_url":"https://api.github.com/users/roidelapluie/repos","events_url":"https://api.github.com/users/roidelapluie/events{/privacy}","received_events_url":"https://api.github.com/users/roidelapluie/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/roidelapluie/grafana","description":"Grafana - A Graphite & InfluxDB Dashboard and Graph Editor","fork":true,"url":"https://api.github.com/repos/roidelapluie/grafana","forks_url":"https://api.github.com/repos/roidelapluie/grafana/forks","keys_url":"https://api.github.com/repos/roidelapluie/grafana/keys{/key_id}","collaborators_url":"https://api.github.com/repos/roidelapluie/grafana/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/roidelapluie/grafana/teams","hooks_url":"https://api.github.com/repos/roidelapluie/grafana/hooks","issue_events_url":"https://api.github.com/repos/roidelapluie/grafana/issues/events{/number}","events_url":"https://api.github.com/repos/roidelapluie/grafana/events","assignees_url":"https://api.github.com/repos/roidelapluie/grafana/assignees{/user}","branches_url":"https://api.github.com/repos/roidelapluie/grafana/branches{/branch}","tags_url":"https://api.github.com/repos/roidelapluie/grafana/tags","blobs_url":"https://api.github.com/repos/roidelapluie/grafana/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/roidelapluie/grafana/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/roidelapluie/grafana/git/refs{/sha}","trees_url":"https://api.github.com/repos/roidelapluie/grafana/git/trees{/sha}","statuses_url":"https://api.github.com/repos/roidelapluie/grafana/statuses/{sha}","languages_url":"https://api.github.com/repos/roidelapluie/grafana/languages","stargazers_url":"https://api.github.com/repos/roidelapluie/grafana/stargazers","contributors_url":"https://api.github.com/repos/roidelapluie/grafana/contributors","subscribers_url":"https://api.github.com/repos/roidelapluie/grafana/subscribers","subscription_url":"https://api.github.com/repos/roidelapluie/grafana/subscription","commits_url":"https://api.github.com/repos/roidelapluie/grafana/commits{/sha}","git_commits_url":"https://api.github.com/repos/roidelapluie/grafana/git/commits{/sha}","comments_url":"https://api.github.com/repos/roidelapluie/grafana/comments{/number}","issue_comment_url":"https://api.github.com/repos/roidelapluie/grafana/issues/comments{/number}","contents_url":"https://api.github.com/repos/roidelapluie/grafana/contents/{+path}","compare_url":"https://api.github.com/repos/roidelapluie/grafana/compare/{base}...{head}","merges_url":"https://api.github.com/repos/roidelapluie/grafana/merges","archive_url":"https://api.github.com/repos/roidelapluie/grafana/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/roidelapluie/grafana/downloads","issues_url":"https://api.github.com/repos/roidelapluie/grafana/issues{/number}","pulls_url":"https://api.github.com/repos/roidelapluie/grafana/pulls{/number}","milestones_url":"https://api.github.com/repos/roidelapluie/grafana/milestones{/number}","notifications_url":"https://api.github.com/repos/roidelapluie/grafana/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/roidelapluie/grafana/labels{/name}","releases_url":"https://api.github.com/repos/roidelapluie/grafana/releases{/id}","deployments_url":"https://api.github.com/repos/roidelapluie/grafana/deployments","created_at":"2014-04-14T12:47:24Z","updated_at":"2014-04-15T17:50:46Z","pushed_at":"2018-03-29T07:49:55Z","git_url":"git://github.com/roidelapluie/grafana.git","ssh_url":"git@github.com:roidelapluie/grafana.git","clone_url":"https://github.com/roidelapluie/grafana.git","svn_url":"https://github.com/roidelapluie/grafana","homepage":"http://grafana.org","size":153903,"stargazers_count":0,"watchers_count":0,"language":"JavaScript","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"archived":false,"open_issues_count":0,"license":{"key":"other","name":"Other","spdx_id":null,"url":null},"forks":0,"open_issues":0,"watchers":0,"default_branch":"master"}},"base":{"label":"grafana:master","ref":"master","sha":"b41370ca498816f444363ed7511dced638dc54f6","user":{"login":"grafana","id":7195757,"avatar_url":"https://avatars0.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","site_admin":false},"repo":{"id":15111821,"name":"grafana","full_name":"grafana/grafana","owner":{"login":"grafana","id":7195757,"avatar_url":"https://avatars0.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/grafana/grafana","description":"The tool for beautiful monitoring and metric analytics & dashboards for Graphite, InfluxDB & Prometheus & More","fork":false,"url":"https://api.github.com/repos/grafana/grafana","forks_url":"https://api.github.com/repos/grafana/grafana/forks","keys_url":"https://api.github.com/repos/grafana/grafana/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/grafana/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/grafana/teams","hooks_url":"https://api.github.com/repos/grafana/grafana/hooks","issue_events_url":"https://api.github.com/repos/grafana/grafana/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/grafana/events","assignees_url":"https://api.github.com/repos/grafana/grafana/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/grafana/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/grafana/tags","blobs_url":"https://api.github.com/repos/grafana/grafana/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/grafana/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/grafana/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/grafana/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/grafana/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/grafana/languages","stargazers_url":"https://api.github.com/repos/grafana/grafana/stargazers","contributors_url":"https://api.github.com/repos/grafana/grafana/contributors","subscribers_url":"https://api.github.com/repos/grafana/grafana/subscribers","subscription_url":"https://api.github.com/repos/grafana/grafana/subscription","commits_url":"https://api.github.com/repos/grafana/grafana/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/grafana/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/grafana/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/grafana/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/grafana/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/grafana/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/grafana/merges","archive_url":"https://api.github.com/repos/grafana/grafana/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/grafana/downloads","issues_url":"https://api.github.com/repos/grafana/grafana/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/grafana/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/grafana/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/grafana/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/grafana/labels{/name}","releases_url":"https://api.github.com/repos/grafana/grafana/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/grafana/deployments","created_at":"2013-12-11T15:59:56Z","updated_at":"2018-03-29T05:23:44Z","pushed_at":"2018-03-29T07:49:59Z","git_url":"git://github.com/grafana/grafana.git","ssh_url":"git@github.com:grafana/grafana.git","clone_url":"https://github.com/grafana/grafana.git","svn_url":"https://github.com/grafana/grafana","homepage":"https://grafana.com","size":178782,"stargazers_count":20944,"watchers_count":20944,"language":"TypeScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":3678,"mirror_url":null,"archived":false,"open_issues_count":1430,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0"},"forks":3678,"open_issues":1430,"watchers":20944,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/grafana/grafana/pulls/11399"},"html":{"href":"https://github.com/grafana/grafana/pull/11399"},"issue":{"href":"https://api.github.com/repos/grafana/grafana/issues/11399"},"comments":{"href":"https://api.github.com/repos/grafana/grafana/issues/11399/comments"},"review_comments":{"href":"https://api.github.com/repos/grafana/grafana/pulls/11399/comments"},"review_comment":{"href":"https://api.github.com/repos/grafana/grafana/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/grafana/grafana/pulls/11399/commits"},"statuses":{"href":"https://api.github.com/repos/grafana/grafana/statuses/1f1719c49822d2a43f225143bb6d389408ad7b43"}},"author_association":"CONTRIBUTOR"}},"public":true,"created_at":"2018-03-29T07:50:59Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7452241679","type":"PullRequestReviewCommentEvent","actor":{"id":618863,"login":"bergquist","display_login":"bergquist","gravatar_id":"","url":"https://api.github.com/users/bergquist","avatar_url":"https://avatars.githubusercontent.com/u/618863?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/grafana/grafana/pulls/comments/177974253","pull_request_review_id":107949615,"id":177974253,"diff_hunk":"@@ -606,6 +606,43 @@ describe('PrometheusDatasource', function() {\n   });\n });\n \n+describe('Prometheus regular escaping', function() {","path":"public/app/plugins/datasource/prometheus/specs/datasource_specs.ts","position":13,"original_position":13,"commit_id":"3ee8b76c082d2a57c0945f7e96a85fe675131dcd","original_commit_id":"3ee8b76c082d2a57c0945f7e96a85fe675131dcd","user":{"login":"bergquist","id":618863,"avatar_url":"https://avatars0.githubusercontent.com/u/618863?v=4","gravatar_id":"","url":"https://api.github.com/users/bergquist","html_url":"https://github.com/bergquist","followers_url":"https://api.github.com/users/bergquist/followers","following_url":"https://api.github.com/users/bergquist/following{/other_user}","gists_url":"https://api.github.com/users/bergquist/gists{/gist_id}","starred_url":"https://api.github.com/users/bergquist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bergquist/subscriptions","organizations_url":"https://api.github.com/users/bergquist/orgs","repos_url":"https://api.github.com/users/bergquist/repos","events_url":"https://api.github.com/users/bergquist/events{/privacy}","received_events_url":"https://api.github.com/users/bergquist/received_events","type":"User","site_admin":false},"body":"These tests should be moved to `datasource.jest.ts` \r\n\r\nwe want to move as many tests as possible to jest instead","created_at":"2018-03-29T07:38:23Z","updated_at":"2018-03-29T07:38:23Z","html_url":"https://github.com/grafana/grafana/pull/11399#discussion_r177974253","pull_request_url":"https://api.github.com/repos/grafana/grafana/pulls/11399","author_association":"CONTRIBUTOR","_links":{"self":{"href":"https://api.github.com/repos/grafana/grafana/pulls/comments/177974253"},"html":{"href":"https://github.com/grafana/grafana/pull/11399#discussion_r177974253"},"pull_request":{"href":"https://api.github.com/repos/grafana/grafana/pulls/11399"}}},"pull_request":{"url":"https://api.github.com/repos/grafana/grafana/pulls/11399","id":177756425,"html_url":"https://github.com/grafana/grafana/pull/11399","diff_url":"https://github.com/grafana/grafana/pull/11399.diff","patch_url":"https://github.com/grafana/grafana/pull/11399.patch","issue_url":"https://api.github.com/repos/grafana/grafana/issues/11399","number":11399,"state":"open","locked":false,"title":"Fix #10555 #6888 Backslash in Prometheus variables","user":{"login":"roidelapluie","id":291750,"avatar_url":"https://avatars2.githubusercontent.com/u/291750?v=4","gravatar_id":"","url":"https://api.github.com/users/roidelapluie","html_url":"https://github.com/roidelapluie","followers_url":"https://api.github.com/users/roidelapluie/followers","following_url":"https://api.github.com/users/roidelapluie/following{/other_user}","gists_url":"https://api.github.com/users/roidelapluie/gists{/gist_id}","starred_url":"https://api.github.com/users/roidelapluie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roidelapluie/subscriptions","organizations_url":"https://api.github.com/users/roidelapluie/orgs","repos_url":"https://api.github.com/users/roidelapluie/repos","events_url":"https://api.github.com/users/roidelapluie/events{/privacy}","received_events_url":"https://api.github.com/users/roidelapluie/received_events","type":"User","site_admin":false},"body":"Prior this commit, `C:\\bar` was escaped `C:\\\\\\bar`. Should be `C:\\\\\\\\bar`.\r\n\r\nSigned-off-by: Julien Pivotto <roidelapluie@inuits.eu>\r\n","created_at":"2018-03-27T14:20:31Z","updated_at":"2018-03-29T07:38:23Z","closed_at":null,"merged_at":null,"merge_commit_sha":"5d91ea0c8f1873eff86b0b1db3a5c6a094459737","assignee":null,"assignees":[],"requested_reviewers":[],"requested_teams":[],"labels":[],"milestone":null,"commits_url":"https://api.github.com/repos/grafana/grafana/pulls/11399/commits","review_comments_url":"https://api.github.com/repos/grafana/grafana/pulls/11399/comments","review_comment_url":"https://api.github.com/repos/grafana/grafana/pulls/comments{/number}","comments_url":"https://api.github.com/repos/grafana/grafana/issues/11399/comments","statuses_url":"https://api.github.com/repos/grafana/grafana/statuses/3ee8b76c082d2a57c0945f7e96a85fe675131dcd","head":{"label":"roidelapluie:promba","ref":"promba","sha":"3ee8b76c082d2a57c0945f7e96a85fe675131dcd","user":{"login":"roidelapluie","id":291750,"avatar_url":"https://avatars2.githubusercontent.com/u/291750?v=4","gravatar_id":"","url":"https://api.github.com/users/roidelapluie","html_url":"https://github.com/roidelapluie","followers_url":"https://api.github.com/users/roidelapluie/followers","following_url":"https://api.github.com/users/roidelapluie/following{/other_user}","gists_url":"https://api.github.com/users/roidelapluie/gists{/gist_id}","starred_url":"https://api.github.com/users/roidelapluie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roidelapluie/subscriptions","organizations_url":"https://api.github.com/users/roidelapluie/orgs","repos_url":"https://api.github.com/users/roidelapluie/repos","events_url":"https://api.github.com/users/roidelapluie/events{/privacy}","received_events_url":"https://api.github.com/users/roidelapluie/received_events","type":"User","site_admin":false},"repo":{"id":18760286,"name":"grafana","full_name":"roidelapluie/grafana","owner":{"login":"roidelapluie","id":291750,"avatar_url":"https://avatars2.githubusercontent.com/u/291750?v=4","gravatar_id":"","url":"https://api.github.com/users/roidelapluie","html_url":"https://github.com/roidelapluie","followers_url":"https://api.github.com/users/roidelapluie/followers","following_url":"https://api.github.com/users/roidelapluie/following{/other_user}","gists_url":"https://api.github.com/users/roidelapluie/gists{/gist_id}","starred_url":"https://api.github.com/users/roidelapluie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roidelapluie/subscriptions","organizations_url":"https://api.github.com/users/roidelapluie/orgs","repos_url":"https://api.github.com/users/roidelapluie/repos","events_url":"https://api.github.com/users/roidelapluie/events{/privacy}","received_events_url":"https://api.github.com/users/roidelapluie/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/roidelapluie/grafana","description":"Grafana - A Graphite & InfluxDB Dashboard and Graph Editor","fork":true,"url":"https://api.github.com/repos/roidelapluie/grafana","forks_url":"https://api.github.com/repos/roidelapluie/grafana/forks","keys_url":"https://api.github.com/repos/roidelapluie/grafana/keys{/key_id}","collaborators_url":"https://api.github.com/repos/roidelapluie/grafana/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/roidelapluie/grafana/teams","hooks_url":"https://api.github.com/repos/roidelapluie/grafana/hooks","issue_events_url":"https://api.github.com/repos/roidelapluie/grafana/issues/events{/number}","events_url":"https://api.github.com/repos/roidelapluie/grafana/events","assignees_url":"https://api.github.com/repos/roidelapluie/grafana/assignees{/user}","branches_url":"https://api.github.com/repos/roidelapluie/grafana/branches{/branch}","tags_url":"https://api.github.com/repos/roidelapluie/grafana/tags","blobs_url":"https://api.github.com/repos/roidelapluie/grafana/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/roidelapluie/grafana/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/roidelapluie/grafana/git/refs{/sha}","trees_url":"https://api.github.com/repos/roidelapluie/grafana/git/trees{/sha}","statuses_url":"https://api.github.com/repos/roidelapluie/grafana/statuses/{sha}","languages_url":"https://api.github.com/repos/roidelapluie/grafana/languages","stargazers_url":"https://api.github.com/repos/roidelapluie/grafana/stargazers","contributors_url":"https://api.github.com/repos/roidelapluie/grafana/contributors","subscribers_url":"https://api.github.com/repos/roidelapluie/grafana/subscribers","subscription_url":"https://api.github.com/repos/roidelapluie/grafana/subscription","commits_url":"https://api.github.com/repos/roidelapluie/grafana/commits{/sha}","git_commits_url":"https://api.github.com/repos/roidelapluie/grafana/git/commits{/sha}","comments_url":"https://api.github.com/repos/roidelapluie/grafana/comments{/number}","issue_comment_url":"https://api.github.com/repos/roidelapluie/grafana/issues/comments{/number}","contents_url":"https://api.github.com/repos/roidelapluie/grafana/contents/{+path}","compare_url":"https://api.github.com/repos/roidelapluie/grafana/compare/{base}...{head}","merges_url":"https://api.github.com/repos/roidelapluie/grafana/merges","archive_url":"https://api.github.com/repos/roidelapluie/grafana/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/roidelapluie/grafana/downloads","issues_url":"https://api.github.com/repos/roidelapluie/grafana/issues{/number}","pulls_url":"https://api.github.com/repos/roidelapluie/grafana/pulls{/number}","milestones_url":"https://api.github.com/repos/roidelapluie/grafana/milestones{/number}","notifications_url":"https://api.github.com/repos/roidelapluie/grafana/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/roidelapluie/grafana/labels{/name}","releases_url":"https://api.github.com/repos/roidelapluie/grafana/releases{/id}","deployments_url":"https://api.github.com/repos/roidelapluie/grafana/deployments","created_at":"2014-04-14T12:47:24Z","updated_at":"2014-04-15T17:50:46Z","pushed_at":"2018-03-28T15:09:37Z","git_url":"git://github.com/roidelapluie/grafana.git","ssh_url":"git@github.com:roidelapluie/grafana.git","clone_url":"https://github.com/roidelapluie/grafana.git","svn_url":"https://github.com/roidelapluie/grafana","homepage":"http://grafana.org","size":153903,"stargazers_count":0,"watchers_count":0,"language":"JavaScript","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"archived":false,"open_issues_count":0,"license":{"key":"other","name":"Other","spdx_id":null,"url":null},"forks":0,"open_issues":0,"watchers":0,"default_branch":"master"}},"base":{"label":"grafana:master","ref":"master","sha":"b41370ca498816f444363ed7511dced638dc54f6","user":{"login":"grafana","id":7195757,"avatar_url":"https://avatars0.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","site_admin":false},"repo":{"id":15111821,"name":"grafana","full_name":"grafana/grafana","owner":{"login":"grafana","id":7195757,"avatar_url":"https://avatars0.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/grafana/grafana","description":"The tool for beautiful monitoring and metric analytics & dashboards for Graphite, InfluxDB & Prometheus & More","fork":false,"url":"https://api.github.com/repos/grafana/grafana","forks_url":"https://api.github.com/repos/grafana/grafana/forks","keys_url":"https://api.github.com/repos/grafana/grafana/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/grafana/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/grafana/teams","hooks_url":"https://api.github.com/repos/grafana/grafana/hooks","issue_events_url":"https://api.github.com/repos/grafana/grafana/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/grafana/events","assignees_url":"https://api.github.com/repos/grafana/grafana/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/grafana/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/grafana/tags","blobs_url":"https://api.github.com/repos/grafana/grafana/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/grafana/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/grafana/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/grafana/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/grafana/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/grafana/languages","stargazers_url":"https://api.github.com/repos/grafana/grafana/stargazers","contributors_url":"https://api.github.com/repos/grafana/grafana/contributors","subscribers_url":"https://api.github.com/repos/grafana/grafana/subscribers","subscription_url":"https://api.github.com/repos/grafana/grafana/subscription","commits_url":"https://api.github.com/repos/grafana/grafana/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/grafana/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/grafana/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/grafana/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/grafana/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/grafana/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/grafana/merges","archive_url":"https://api.github.com/repos/grafana/grafana/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/grafana/downloads","issues_url":"https://api.github.com/repos/grafana/grafana/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/grafana/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/grafana/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/grafana/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/grafana/labels{/name}","releases_url":"https://api.github.com/repos/grafana/grafana/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/grafana/deployments","created_at":"2013-12-11T15:59:56Z","updated_at":"2018-03-29T05:23:44Z","pushed_at":"2018-03-29T07:17:09Z","git_url":"git://github.com/grafana/grafana.git","ssh_url":"git@github.com:grafana/grafana.git","clone_url":"https://github.com/grafana/grafana.git","svn_url":"https://github.com/grafana/grafana","homepage":"https://grafana.com","size":178782,"stargazers_count":20944,"watchers_count":20944,"language":"TypeScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":3678,"mirror_url":null,"archived":false,"open_issues_count":1430,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0"},"forks":3678,"open_issues":1430,"watchers":20944,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/grafana/grafana/pulls/11399"},"html":{"href":"https://github.com/grafana/grafana/pull/11399"},"issue":{"href":"https://api.github.com/repos/grafana/grafana/issues/11399"},"comments":{"href":"https://api.github.com/repos/grafana/grafana/issues/11399/comments"},"review_comments":{"href":"https://api.github.com/repos/grafana/grafana/pulls/11399/comments"},"review_comment":{"href":"https://api.github.com/repos/grafana/grafana/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/grafana/grafana/pulls/11399/commits"},"statuses":{"href":"https://api.github.com/repos/grafana/grafana/statuses/3ee8b76c082d2a57c0945f7e96a85fe675131dcd"}},"author_association":"CONTRIBUTOR"}},"public":true,"created_at":"2018-03-29T07:38:23Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7452237456","type":"IssueCommentEvent","actor":{"id":8789835,"login":"tsn77130","display_login":"tsn77130","gravatar_id":"","url":"https://api.github.com/users/tsn77130","avatar_url":"https://avatars.githubusercontent.com/u/8789835?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/grafana/grafana/issues/11311","repository_url":"https://api.github.com/repos/grafana/grafana","labels_url":"https://api.github.com/repos/grafana/grafana/issues/11311/labels{/name}","comments_url":"https://api.github.com/repos/grafana/grafana/issues/11311/comments","events_url":"https://api.github.com/repos/grafana/grafana/issues/11311/events","html_url":"https://github.com/grafana/grafana/issues/11311","id":306822631,"number":11311,"title":"Get organisation for some users returns empty result (ldap+auth.poxy config)","user":{"login":"tsn77130","id":8789835,"avatar_url":"https://avatars1.githubusercontent.com/u/8789835?v=4","gravatar_id":"","url":"https://api.github.com/users/tsn77130","html_url":"https://github.com/tsn77130","followers_url":"https://api.github.com/users/tsn77130/followers","following_url":"https://api.github.com/users/tsn77130/following{/other_user}","gists_url":"https://api.github.com/users/tsn77130/gists{/gist_id}","starred_url":"https://api.github.com/users/tsn77130/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tsn77130/subscriptions","organizations_url":"https://api.github.com/users/tsn77130/orgs","repos_url":"https://api.github.com/users/tsn77130/repos","events_url":"https://api.github.com/users/tsn77130/events{/privacy}","received_events_url":"https://api.github.com/users/tsn77130/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-03-20T11:16:30Z","updated_at":"2018-03-29T07:37:22Z","closed_at":null,"author_association":"NONE","body":"Hi all,\r\n\r\n\r\nWhen I login with new user, I fall into -1 org (auth.proxy + LDAP config) on 1st log.\r\nProblem is that I sometimes can't get out of this org, because some of my users does not seems to have another org declared in grafana, despite fact that LDAP & ldap.toml configuration are OK.\r\nThat seems to be random problem, some users can change org, and other can't.\r\n\r\nExample : \r\n\r\n\r\n```\r\n#User exists\r\ncurl -s -XGET \"http://127.0.0.1:3000/api/users/lookup?loginOrEmail=xxx@xxx.com\" -u \"xxx:yyy\"\r\n{\r\n   \"isGrafanaAdmin\" : false,\r\n   \"name\" : \" 7164\",\r\n   \"email\" : \"xxx@xxx.com\",\r\n   \"theme\" : \"\",\r\n   \"id\" : 113,\r\n   \"orgId\" : -1,\r\n   \"login\" : \"xxx@xxx.com\"\r\n}\r\n\r\nAs you can see, user falls into -1 org ...\r\n\r\n#Org exists\r\ncurl -s -XGET \"http://127.0.0.1:3000/api/orgs/7164\" -u \"xxx:yyy\" | json_pp   \r\n{\r\n   \"address\" : {\r\n      \"city\" : \"\",\r\n      \"address1\" : \"\",\r\n      \"state\" : \"\",\r\n      \"country\" : \"\",\r\n      \"address2\" : \"\",\r\n      \"zipCode\" : \"\"\r\n   },\r\n   \"id\" : 7164,\r\n   \"name\" : \"7164\"\r\n}\r\n\r\n#If I check user orgs, I see this is empty, it should display user's org \"7164\" according to ldap config.\r\ncurl -s -XGET \"http://127.0.0.1:3000/api/users/113/orgs\" -u \"xxx:yyy\"\r\n[]\r\n\r\n#With some other users, I have correct group\r\ncurl -s -XGET \"http://127.0.0.1:3000/api/users/97/orgs\" -u \"xxx:yyy\"\r\n[{\"orgId\":7023,\"name\":\"7023\",\"role\":\"Viewer\"}]\r\n\r\n#So if I try to change user org ID, this does not works (that seems logic)\r\ncurl -XPOST \"http://127.0.0.1:3000/api/users/113/using/7164\" -u \"xxx:yyy\"\r\n{\r\n   \"message\" : \"Not a valid organization\"\r\n}\r\n\r\n#ldap.toml group mapping\r\n[[servers.group_mappings]]\r\ngroup_dn = \"cn=7164,ou=CustomersGroups,dc=xxx,dc=com\"\r\norg_role = \"Viewer\"\r\norg_id = 7164\r\n\r\n\r\n#And LDAP search which is return correct result (same group defined in ldap.toml)\r\nldapsearch -x -D cn=admin,dc=xxx,dc=com -w \"xxx:yyy\" -b ou=CustomersGroups,dc=xxx,dc=com AccountID=7164 member \r\n\r\n 7164, CustomersGroups, xxx.com\r\ndn: cn=7164,ou=CustomersGroups,dc=xxx,dc=com\r\nmember: uid=xxx@xxx.com,ou=Customers,dc=xxx,dc=com\r\n\r\n search result\r\nsearch: 2\r\nresult: 0 Success\r\n\r\n numResponses: 2\r\n numEntries: 1\r\n\r\n```\r\n\r\nIf I do the exact same procedure with another account, it sometimes works, and sometimes not.\r\nLDAP search logs are exactly the same between one account which works, and another one which does not.\r\n\r\nIs there something which could explain this ?\r\n\r\n\r\n\r\nWhat Grafana version are you using? 4.6.4 & 5.0.1 tested\r\nWhat datasource are you using? influxdb\r\nWhat OS are you running grafana on? debian 9 \r\nWhat did you do? I tried to login with user defined in LDAP group mapping\r\nWhat was the expected result? Login, ideally directly in correct Org, at least in -1 org but with possibility to switch to correct org.\r\nWhat happened instead? I can't switch to user org\r\n \r\nThanks, thomas"},"comment":{"url":"https://api.github.com/repos/grafana/grafana/issues/comments/377149951","html_url":"https://github.com/grafana/grafana/issues/11311#issuecomment-377149951","issue_url":"https://api.github.com/repos/grafana/grafana/issues/11311","id":377149951,"user":{"login":"tsn77130","id":8789835,"avatar_url":"https://avatars1.githubusercontent.com/u/8789835?v=4","gravatar_id":"","url":"https://api.github.com/users/tsn77130","html_url":"https://github.com/tsn77130","followers_url":"https://api.github.com/users/tsn77130/followers","following_url":"https://api.github.com/users/tsn77130/following{/other_user}","gists_url":"https://api.github.com/users/tsn77130/gists{/gist_id}","starred_url":"https://api.github.com/users/tsn77130/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tsn77130/subscriptions","organizations_url":"https://api.github.com/users/tsn77130/orgs","repos_url":"https://api.github.com/users/tsn77130/repos","events_url":"https://api.github.com/users/tsn77130/events{/privacy}","received_events_url":"https://api.github.com/users/tsn77130/received_events","type":"User","site_admin":false},"created_at":"2018-03-29T07:37:22Z","updated_at":"2018-03-29T07:37:22Z","author_association":"NONE","body":"  @rda0 , for step 1, I had same error message. I fixed by deleting by UI all global users (with admin account). And I still have auto_assign_org = false)\r\n\r\nAfter 1st login, I was in orgId=-1, with no button for switching. Changing URL wasn't working for me (page not found)\r\nI fixed it by using https://<our_domain>/profile/switch-org/'org_id' after 1st login (and I used a redirection trick to always call this page when users login now, it is idempotent.)\r\n\r\nIt does not work as it should be, but with these fixs, it is now usable for us."}},"public":true,"created_at":"2018-03-29T07:37:22Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7452156859","type":"PullRequestEvent","actor":{"id":23470681,"login":"Ijin08","display_login":"Ijin08","gravatar_id":"","url":"https://api.github.com/users/Ijin08","avatar_url":"https://avatars.githubusercontent.com/u/23470681?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"action":"opened","number":11430,"pull_request":{"url":"https://api.github.com/repos/grafana/grafana/pulls/11430","id":178245349,"html_url":"https://github.com/grafana/grafana/pull/11430","diff_url":"https://github.com/grafana/grafana/pull/11430.diff","patch_url":"https://github.com/grafana/grafana/pull/11430.patch","issue_url":"https://api.github.com/repos/grafana/grafana/issues/11430","number":11430,"state":"open","locked":false,"title":"bound the esc key to exit timepicker","user":{"login":"Ijin08","id":23470681,"avatar_url":"https://avatars2.githubusercontent.com/u/23470681?v=4","gravatar_id":"","url":"https://api.github.com/users/Ijin08","html_url":"https://github.com/Ijin08","followers_url":"https://api.github.com/users/Ijin08/followers","following_url":"https://api.github.com/users/Ijin08/following{/other_user}","gists_url":"https://api.github.com/users/Ijin08/gists{/gist_id}","starred_url":"https://api.github.com/users/Ijin08/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ijin08/subscriptions","organizations_url":"https://api.github.com/users/Ijin08/orgs","repos_url":"https://api.github.com/users/Ijin08/repos","events_url":"https://api.github.com/users/Ijin08/events{/privacy}","received_events_url":"https://api.github.com/users/Ijin08/received_events","type":"User","site_admin":false},"body":"fixes #11332\r\n","created_at":"2018-03-29T07:17:08Z","updated_at":"2018-03-29T07:17:08Z","closed_at":null,"merged_at":null,"merge_commit_sha":null,"assignee":null,"assignees":[],"requested_reviewers":[],"requested_teams":[],"labels":[],"milestone":null,"commits_url":"https://api.github.com/repos/grafana/grafana/pulls/11430/commits","review_comments_url":"https://api.github.com/repos/grafana/grafana/pulls/11430/comments","review_comment_url":"https://api.github.com/repos/grafana/grafana/pulls/comments{/number}","comments_url":"https://api.github.com/repos/grafana/grafana/issues/11430/comments","statuses_url":"https://api.github.com/repos/grafana/grafana/statuses/8195c085fa2a095fe753f725663ff7217cc14365","head":{"label":"grafana:11332_esc_timepicker","ref":"11332_esc_timepicker","sha":"8195c085fa2a095fe753f725663ff7217cc14365","user":{"login":"grafana","id":7195757,"avatar_url":"https://avatars0.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","site_admin":false},"repo":{"id":15111821,"name":"grafana","full_name":"grafana/grafana","owner":{"login":"grafana","id":7195757,"avatar_url":"https://avatars0.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/grafana/grafana","description":"The tool for beautiful monitoring and metric analytics & dashboards for Graphite, InfluxDB & Prometheus & More","fork":false,"url":"https://api.github.com/repos/grafana/grafana","forks_url":"https://api.github.com/repos/grafana/grafana/forks","keys_url":"https://api.github.com/repos/grafana/grafana/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/grafana/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/grafana/teams","hooks_url":"https://api.github.com/repos/grafana/grafana/hooks","issue_events_url":"https://api.github.com/repos/grafana/grafana/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/grafana/events","assignees_url":"https://api.github.com/repos/grafana/grafana/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/grafana/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/grafana/tags","blobs_url":"https://api.github.com/repos/grafana/grafana/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/grafana/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/grafana/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/grafana/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/grafana/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/grafana/languages","stargazers_url":"https://api.github.com/repos/grafana/grafana/stargazers","contributors_url":"https://api.github.com/repos/grafana/grafana/contributors","subscribers_url":"https://api.github.com/repos/grafana/grafana/subscribers","subscription_url":"https://api.github.com/repos/grafana/grafana/subscription","commits_url":"https://api.github.com/repos/grafana/grafana/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/grafana/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/grafana/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/grafana/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/grafana/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/grafana/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/grafana/merges","archive_url":"https://api.github.com/repos/grafana/grafana/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/grafana/downloads","issues_url":"https://api.github.com/repos/grafana/grafana/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/grafana/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/grafana/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/grafana/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/grafana/labels{/name}","releases_url":"https://api.github.com/repos/grafana/grafana/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/grafana/deployments","created_at":"2013-12-11T15:59:56Z","updated_at":"2018-03-29T05:23:44Z","pushed_at":"2018-03-29T07:15:46Z","git_url":"git://github.com/grafana/grafana.git","ssh_url":"git@github.com:grafana/grafana.git","clone_url":"https://github.com/grafana/grafana.git","svn_url":"https://github.com/grafana/grafana","homepage":"https://grafana.com","size":178782,"stargazers_count":20944,"watchers_count":20944,"language":"TypeScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":3678,"mirror_url":null,"archived":false,"open_issues_count":1430,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0"},"forks":3678,"open_issues":1430,"watchers":20944,"default_branch":"master"}},"base":{"label":"grafana:master","ref":"master","sha":"b41370ca498816f444363ed7511dced638dc54f6","user":{"login":"grafana","id":7195757,"avatar_url":"https://avatars0.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","site_admin":false},"repo":{"id":15111821,"name":"grafana","full_name":"grafana/grafana","owner":{"login":"grafana","id":7195757,"avatar_url":"https://avatars0.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/grafana/grafana","description":"The tool for beautiful monitoring and metric analytics & dashboards for Graphite, InfluxDB & Prometheus & More","fork":false,"url":"https://api.github.com/repos/grafana/grafana","forks_url":"https://api.github.com/repos/grafana/grafana/forks","keys_url":"https://api.github.com/repos/grafana/grafana/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/grafana/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/grafana/teams","hooks_url":"https://api.github.com/repos/grafana/grafana/hooks","issue_events_url":"https://api.github.com/repos/grafana/grafana/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/grafana/events","assignees_url":"https://api.github.com/repos/grafana/grafana/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/grafana/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/grafana/tags","blobs_url":"https://api.github.com/repos/grafana/grafana/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/grafana/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/grafana/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/grafana/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/grafana/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/grafana/languages","stargazers_url":"https://api.github.com/repos/grafana/grafana/stargazers","contributors_url":"https://api.github.com/repos/grafana/grafana/contributors","subscribers_url":"https://api.github.com/repos/grafana/grafana/subscribers","subscription_url":"https://api.github.com/repos/grafana/grafana/subscription","commits_url":"https://api.github.com/repos/grafana/grafana/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/grafana/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/grafana/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/grafana/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/grafana/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/grafana/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/grafana/merges","archive_url":"https://api.github.com/repos/grafana/grafana/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/grafana/downloads","issues_url":"https://api.github.com/repos/grafana/grafana/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/grafana/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/grafana/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/grafana/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/grafana/labels{/name}","releases_url":"https://api.github.com/repos/grafana/grafana/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/grafana/deployments","created_at":"2013-12-11T15:59:56Z","updated_at":"2018-03-29T05:23:44Z","pushed_at":"2018-03-29T07:15:46Z","git_url":"git://github.com/grafana/grafana.git","ssh_url":"git@github.com:grafana/grafana.git","clone_url":"https://github.com/grafana/grafana.git","svn_url":"https://github.com/grafana/grafana","homepage":"https://grafana.com","size":178782,"stargazers_count":20944,"watchers_count":20944,"language":"TypeScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":3678,"mirror_url":null,"archived":false,"open_issues_count":1430,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0"},"forks":3678,"open_issues":1430,"watchers":20944,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/grafana/grafana/pulls/11430"},"html":{"href":"https://github.com/grafana/grafana/pull/11430"},"issue":{"href":"https://api.github.com/repos/grafana/grafana/issues/11430"},"comments":{"href":"https://api.github.com/repos/grafana/grafana/issues/11430/comments"},"review_comments":{"href":"https://api.github.com/repos/grafana/grafana/pulls/11430/comments"},"review_comment":{"href":"https://api.github.com/repos/grafana/grafana/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/grafana/grafana/pulls/11430/commits"},"statuses":{"href":"https://api.github.com/repos/grafana/grafana/statuses/8195c085fa2a095fe753f725663ff7217cc14365"}},"author_association":"CONTRIBUTOR","merged":false,"mergeable":null,"rebaseable":null,"mergeable_state":"unknown","merged_by":null,"comments":0,"review_comments":0,"maintainer_can_modify":false,"commits":1,"additions":10,"deletions":0,"changed_files":2}},"public":true,"created_at":"2018-03-29T07:17:08Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7452151855","type":"CreateEvent","actor":{"id":23470681,"login":"Ijin08","display_login":"Ijin08","gravatar_id":"","url":"https://api.github.com/users/Ijin08","avatar_url":"https://avatars.githubusercontent.com/u/23470681?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"ref":"11332_esc_timepicker","ref_type":"branch","master_branch":"master","description":"The tool for beautiful monitoring and metric analytics & dashboards for Graphite, InfluxDB & Prometheus & More","pusher_type":"user"},"public":true,"created_at":"2018-03-29T07:15:51Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7452056380","type":"IssuesEvent","actor":{"id":618863,"login":"bergquist","display_login":"bergquist","gravatar_id":"","url":"https://api.github.com/users/bergquist","avatar_url":"https://avatars.githubusercontent.com/u/618863?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"action":"opened","issue":{"url":"https://api.github.com/repos/grafana/grafana/issues/11429","repository_url":"https://api.github.com/repos/grafana/grafana","labels_url":"https://api.github.com/repos/grafana/grafana/issues/11429/labels{/name}","comments_url":"https://api.github.com/repos/grafana/grafana/issues/11429/comments","events_url":"https://api.github.com/repos/grafana/grafana/issues/11429/events","html_url":"https://github.com/grafana/grafana/issues/11429","id":309638727,"number":11429,"title":"Reduce the amount of full page reloads in playlist mode.","user":{"login":"bergquist","id":618863,"avatar_url":"https://avatars0.githubusercontent.com/u/618863?v=4","gravatar_id":"","url":"https://api.github.com/users/bergquist","html_url":"https://github.com/bergquist","followers_url":"https://api.github.com/users/bergquist/followers","following_url":"https://api.github.com/users/bergquist/following{/other_user}","gists_url":"https://api.github.com/users/bergquist/gists{/gist_id}","starred_url":"https://api.github.com/users/bergquist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bergquist/subscriptions","organizations_url":"https://api.github.com/users/bergquist/orgs","repos_url":"https://api.github.com/users/bergquist/repos","events_url":"https://api.github.com/users/bergquist/events{/privacy}","received_events_url":"https://api.github.com/users/bergquist/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-03-29T06:50:02Z","updated_at":"2018-03-29T06:50:02Z","closed_at":null,"author_association":"CONTRIBUTOR","body":""}},"public":true,"created_at":"2018-03-29T06:50:02Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7452041162","type":"IssueCommentEvent","actor":{"id":1668778,"login":"marefr","display_login":"marefr","gravatar_id":"","url":"https://api.github.com/users/marefr","avatar_url":"https://avatars.githubusercontent.com/u/1668778?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/grafana/grafana/issues/11391","repository_url":"https://api.github.com/repos/grafana/grafana","labels_url":"https://api.github.com/repos/grafana/grafana/issues/11391/labels{/name}","comments_url":"https://api.github.com/repos/grafana/grafana/issues/11391/comments","events_url":"https://api.github.com/repos/grafana/grafana/issues/11391/events","html_url":"https://github.com/grafana/grafana/issues/11391","id":308853653,"number":11391,"title":"Rename Direct Access Mode in the data source settings","user":{"login":"daniellee","id":434655,"avatar_url":"https://avatars3.githubusercontent.com/u/434655?v=4","gravatar_id":"","url":"https://api.github.com/users/daniellee","html_url":"https://github.com/daniellee","followers_url":"https://api.github.com/users/daniellee/followers","following_url":"https://api.github.com/users/daniellee/following{/other_user}","gists_url":"https://api.github.com/users/daniellee/gists{/gist_id}","starred_url":"https://api.github.com/users/daniellee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daniellee/subscriptions","organizations_url":"https://api.github.com/users/daniellee/orgs","repos_url":"https://api.github.com/users/daniellee/repos","events_url":"https://api.github.com/users/daniellee/events{/privacy}","received_events_url":"https://api.github.com/users/daniellee/received_events","type":"User","site_admin":false},"labels":[{"id":124689180,"url":"https://api.github.com/repos/grafana/grafana/labels/type:%20ux","name":"type: ux","color":"dddddd","default":false}],"state":"open","locked":false,"assignee":{"login":"marefr","id":1668778,"avatar_url":"https://avatars0.githubusercontent.com/u/1668778?v=4","gravatar_id":"","url":"https://api.github.com/users/marefr","html_url":"https://github.com/marefr","followers_url":"https://api.github.com/users/marefr/followers","following_url":"https://api.github.com/users/marefr/following{/other_user}","gists_url":"https://api.github.com/users/marefr/gists{/gist_id}","starred_url":"https://api.github.com/users/marefr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marefr/subscriptions","organizations_url":"https://api.github.com/users/marefr/orgs","repos_url":"https://api.github.com/users/marefr/repos","events_url":"https://api.github.com/users/marefr/events{/privacy}","received_events_url":"https://api.github.com/users/marefr/received_events","type":"User","site_admin":false},"assignees":[{"login":"marefr","id":1668778,"avatar_url":"https://avatars0.githubusercontent.com/u/1668778?v=4","gravatar_id":"","url":"https://api.github.com/users/marefr","html_url":"https://github.com/marefr","followers_url":"https://api.github.com/users/marefr/followers","following_url":"https://api.github.com/users/marefr/following{/other_user}","gists_url":"https://api.github.com/users/marefr/gists{/gist_id}","starred_url":"https://api.github.com/users/marefr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marefr/subscriptions","organizations_url":"https://api.github.com/users/marefr/orgs","repos_url":"https://api.github.com/users/marefr/repos","events_url":"https://api.github.com/users/marefr/events{/privacy}","received_events_url":"https://api.github.com/users/marefr/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/grafana/grafana/milestones/76","html_url":"https://github.com/grafana/grafana/milestone/76","labels_url":"https://api.github.com/repos/grafana/grafana/milestones/76/labels","id":2863993,"number":76,"title":"5.1","description":"","creator":{"login":"torkelo","id":10999,"avatar_url":"https://avatars3.githubusercontent.com/u/10999?v=4","gravatar_id":"","url":"https://api.github.com/users/torkelo","html_url":"https://github.com/torkelo","followers_url":"https://api.github.com/users/torkelo/followers","following_url":"https://api.github.com/users/torkelo/following{/other_user}","gists_url":"https://api.github.com/users/torkelo/gists{/gist_id}","starred_url":"https://api.github.com/users/torkelo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/torkelo/subscriptions","organizations_url":"https://api.github.com/users/torkelo/orgs","repos_url":"https://api.github.com/users/torkelo/repos","events_url":"https://api.github.com/users/torkelo/events{/privacy}","received_events_url":"https://api.github.com/users/torkelo/received_events","type":"User","site_admin":false},"open_issues":30,"closed_issues":51,"state":"open","created_at":"2017-10-25T06:41:05Z","updated_at":"2018-03-29T04:08:21Z","due_on":null,"closed_at":null},"comments":4,"created_at":"2018-03-27T07:36:31Z","updated_at":"2018-03-29T06:45:39Z","closed_at":null,"author_association":"MEMBER","body":"Currently, the two choices for Access Mode in the data source settings are Proxy and Direct. A lot of users choose Direct and then create issues or questions on the community site when they fail to connect to their data source. Direct sounds better than Proxy if you don't know what the two terms mean in the Grafana context.\r\n\r\nWe could significantly decrease the support burden by renaming Direct to something else or by doing a UX change that explains why Proxy should be chosen > 90% of the time.\r\n \r\n"},"comment":{"url":"https://api.github.com/repos/grafana/grafana/issues/comments/377138683","html_url":"https://github.com/grafana/grafana/issues/11391#issuecomment-377138683","issue_url":"https://api.github.com/repos/grafana/grafana/issues/11391","id":377138683,"user":{"login":"marefr","id":1668778,"avatar_url":"https://avatars0.githubusercontent.com/u/1668778?v=4","gravatar_id":"","url":"https://api.github.com/users/marefr","html_url":"https://github.com/marefr","followers_url":"https://api.github.com/users/marefr/followers","following_url":"https://api.github.com/users/marefr/following{/other_user}","gists_url":"https://api.github.com/users/marefr/gists{/gist_id}","starred_url":"https://api.github.com/users/marefr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marefr/subscriptions","organizations_url":"https://api.github.com/users/marefr/orgs","repos_url":"https://api.github.com/users/marefr/repos","events_url":"https://api.github.com/users/marefr/events{/privacy}","received_events_url":"https://api.github.com/users/marefr/received_events","type":"User","site_admin":false},"created_at":"2018-03-29T06:45:39Z","updated_at":"2018-03-29T06:45:39Z","author_association":"MEMBER","body":"There's a popover visible on hover of info icon, but I wonder how many users actually looking at that.\r\n\r\n![image](https://user-images.githubusercontent.com/1668778/38073906-41627e8e-332d-11e8-8b7a-f49196b47ca2.png).\r\n\r\nWill take a quick look into possibility to change text but preserving value in the select box. I still agree that better error handling and tooltips are needed."}},"public":true,"created_at":"2018-03-29T06:45:39Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7451988257","type":"IssueCommentEvent","actor":{"id":1668778,"login":"marefr","display_login":"marefr","gravatar_id":"","url":"https://api.github.com/users/marefr","avatar_url":"https://avatars.githubusercontent.com/u/1668778?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/grafana/grafana/issues/10497","repository_url":"https://api.github.com/repos/grafana/grafana","labels_url":"https://api.github.com/repos/grafana/grafana/issues/10497/labels{/name}","comments_url":"https://api.github.com/repos/grafana/grafana/issues/10497/comments","events_url":"https://api.github.com/repos/grafana/grafana/issues/10497/events","html_url":"https://github.com/grafana/grafana/issues/10497","id":287911031,"number":10497,"title":"[bug] Export to CSV should use dashboard timezone setting","user":{"login":"dmossie","id":30665550,"avatar_url":"https://avatars1.githubusercontent.com/u/30665550?v=4","gravatar_id":"","url":"https://api.github.com/users/dmossie","html_url":"https://github.com/dmossie","followers_url":"https://api.github.com/users/dmossie/followers","following_url":"https://api.github.com/users/dmossie/following{/other_user}","gists_url":"https://api.github.com/users/dmossie/gists{/gist_id}","starred_url":"https://api.github.com/users/dmossie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmossie/subscriptions","organizations_url":"https://api.github.com/users/dmossie/orgs","repos_url":"https://api.github.com/users/dmossie/repos","events_url":"https://api.github.com/users/dmossie/events{/privacy}","received_events_url":"https://api.github.com/users/dmossie/received_events","type":"User","site_admin":false},"labels":[{"id":120793381,"url":"https://api.github.com/repos/grafana/grafana/labels/comp:%20dashboard","name":"comp: dashboard","color":"c7def8","default":false},{"id":108770151,"url":"https://api.github.com/repos/grafana/grafana/labels/comp:%20panel/graph","name":"comp: panel/graph","color":"c7def8","default":false},{"id":602103537,"url":"https://api.github.com/repos/grafana/grafana/labels/comp:%20panel/heatmap","name":"comp: panel/heatmap","color":"c7def8","default":false},{"id":290932288,"url":"https://api.github.com/repos/grafana/grafana/labels/comp:%20panel/table","name":"comp: panel/table","color":"c7def8","default":false},{"id":70176318,"url":"https://api.github.com/repos/grafana/grafana/labels/type:%20bug","name":"type: bug","color":"b60205","default":false}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-01-11T20:17:38Z","updated_at":"2018-03-29T06:29:44Z","closed_at":null,"author_association":"NONE","body":"I am having an issue exporting data. I think the issue is I am trying to export the data in UTC, but it exports it in local time.\r\n\r\n![excel](https://user-images.githubusercontent.com/30665550/34845333-62ce12d6-f6c9-11e7-9708-ca387b1a7ed1.png)\r\n![grafana](https://user-images.githubusercontent.com/30665550/34845334-62e77e56-f6c9-11e7-96f0-6ca1b625fef3.png)\r\n\r\nI discussed this with @DanCech on Slack.\r\nRight now it's going to use the browser timezone for the export because it just uses `moment(<timestamp).format(<format)`"},"comment":{"url":"https://api.github.com/repos/grafana/grafana/issues/comments/377135739","html_url":"https://github.com/grafana/grafana/issues/10497#issuecomment-377135739","issue_url":"https://api.github.com/repos/grafana/grafana/issues/10497","id":377135739,"user":{"login":"marefr","id":1668778,"avatar_url":"https://avatars0.githubusercontent.com/u/1668778?v=4","gravatar_id":"","url":"https://api.github.com/users/marefr","html_url":"https://github.com/marefr","followers_url":"https://api.github.com/users/marefr/followers","following_url":"https://api.github.com/users/marefr/following{/other_user}","gists_url":"https://api.github.com/users/marefr/gists{/gist_id}","starred_url":"https://api.github.com/users/marefr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marefr/subscriptions","organizations_url":"https://api.github.com/users/marefr/orgs","repos_url":"https://api.github.com/users/marefr/repos","events_url":"https://api.github.com/users/marefr/events{/privacy}","received_events_url":"https://api.github.com/users/marefr/received_events","type":"User","site_admin":false},"created_at":"2018-03-29T06:29:44Z","updated_at":"2018-03-29T06:29:44Z","author_association":"MEMBER","body":"Relabeling this as bug instead of feature due to report in #11427"}},"public":true,"created_at":"2018-03-29T06:29:44Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7451979593","type":"IssuesEvent","actor":{"id":1668778,"login":"marefr","display_login":"marefr","gravatar_id":"","url":"https://api.github.com/users/marefr","avatar_url":"https://avatars.githubusercontent.com/u/1668778?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"action":"closed","issue":{"url":"https://api.github.com/repos/grafana/grafana/issues/11427","repository_url":"https://api.github.com/repos/grafana/grafana","labels_url":"https://api.github.com/repos/grafana/grafana/issues/11427/labels{/name}","comments_url":"https://api.github.com/repos/grafana/grafana/issues/11427/comments","events_url":"https://api.github.com/repos/grafana/grafana/issues/11427/events","html_url":"https://github.com/grafana/grafana/issues/11427","id":309498544,"number":11427,"title":"[bug] Timestamps in CSV export for UTC dashboard are in local time","user":{"login":"svet-b","id":12831860,"avatar_url":"https://avatars3.githubusercontent.com/u/12831860?v=4","gravatar_id":"","url":"https://api.github.com/users/svet-b","html_url":"https://github.com/svet-b","followers_url":"https://api.github.com/users/svet-b/followers","following_url":"https://api.github.com/users/svet-b/following{/other_user}","gists_url":"https://api.github.com/users/svet-b/gists{/gist_id}","starred_url":"https://api.github.com/users/svet-b/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/svet-b/subscriptions","organizations_url":"https://api.github.com/users/svet-b/orgs","repos_url":"https://api.github.com/users/svet-b/repos","events_url":"https://api.github.com/users/svet-b/events{/privacy}","received_events_url":"https://api.github.com/users/svet-b/received_events","type":"User","site_admin":false},"labels":[{"id":108770151,"url":"https://api.github.com/repos/grafana/grafana/labels/comp:%20panel/graph","name":"comp: panel/graph","color":"c7def8","default":false},{"id":70176318,"url":"https://api.github.com/repos/grafana/grafana/labels/type:%20bug","name":"type: bug","color":"b60205","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-03-28T19:25:21Z","updated_at":"2018-03-29T06:27:09Z","closed_at":"2018-03-29T06:27:09Z","author_association":"NONE","body":"**What Grafana version are you using?** 5.0.1 \r\n**What datasource are you using?** InfluxDB\r\n**What OS are you running grafana on?** Linux\r\n\r\n**What did you do?**\r\nIn a dashboard that's set to display charts in UTC, I did a CSV export. In the export, \"Time Date Format\" was kept set to the default `YYYY-MM-DDTHH:mm:ssZ`\r\n\r\n**What was the expected result?**\r\nI expected the CSV export to contain ISO 8601 timestamps in UTC, e.g. `2018-03-26T19:14:00Z`.\r\n\r\nThis is indeed the behavior on an older Grafana 4.3 instance I was running previously, from where this dashboard was imported.\r\n\r\n**What happened instead?**\r\nThe CSV export contained timestamps in local time, including timezone offset. E.g. `2018-03-26T15:14:00-04:00`. Attempts to work around this, such as removing the `Z` from the \"Time Date Format\" simply removed the timezone offset (e.g. leaving `2018-03-26T15:14:00` in local time).\r\n\r\nThis behavior persists whether exporting series as rows or columns, and no matter whether \"Excel CSV Dialect\" is ticked or not.\r\n\r\nThis behavior is also described in https://github.com/grafana/grafana/issues/10497, but somehow tagged as a \"feature request\". I believe it to be a bug, based on the following factors:\r\n- Probably unintended change in behavior with respect to Grafana 4\r\n- `YYYY-MM-DDTHH:mm:ssZ` denotes the ISO 8601 format for UTC time. The `Z` should not ordinarily be interpreted as \"timezone offset\" - though I appreciate there is some ambiguity here"}},"public":true,"created_at":"2018-03-29T06:27:09Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7451979591","type":"IssueCommentEvent","actor":{"id":1668778,"login":"marefr","display_login":"marefr","gravatar_id":"","url":"https://api.github.com/users/marefr","avatar_url":"https://avatars.githubusercontent.com/u/1668778?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/grafana/grafana/issues/11427","repository_url":"https://api.github.com/repos/grafana/grafana","labels_url":"https://api.github.com/repos/grafana/grafana/issues/11427/labels{/name}","comments_url":"https://api.github.com/repos/grafana/grafana/issues/11427/comments","events_url":"https://api.github.com/repos/grafana/grafana/issues/11427/events","html_url":"https://github.com/grafana/grafana/issues/11427","id":309498544,"number":11427,"title":"[bug] Timestamps in CSV export for UTC dashboard are in local time","user":{"login":"svet-b","id":12831860,"avatar_url":"https://avatars3.githubusercontent.com/u/12831860?v=4","gravatar_id":"","url":"https://api.github.com/users/svet-b","html_url":"https://github.com/svet-b","followers_url":"https://api.github.com/users/svet-b/followers","following_url":"https://api.github.com/users/svet-b/following{/other_user}","gists_url":"https://api.github.com/users/svet-b/gists{/gist_id}","starred_url":"https://api.github.com/users/svet-b/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/svet-b/subscriptions","organizations_url":"https://api.github.com/users/svet-b/orgs","repos_url":"https://api.github.com/users/svet-b/repos","events_url":"https://api.github.com/users/svet-b/events{/privacy}","received_events_url":"https://api.github.com/users/svet-b/received_events","type":"User","site_admin":false},"labels":[{"id":108770151,"url":"https://api.github.com/repos/grafana/grafana/labels/comp:%20panel/graph","name":"comp: panel/graph","color":"c7def8","default":false},{"id":70176318,"url":"https://api.github.com/repos/grafana/grafana/labels/type:%20bug","name":"type: bug","color":"b60205","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-03-28T19:25:21Z","updated_at":"2018-03-29T06:27:09Z","closed_at":"2018-03-29T06:27:09Z","author_association":"NONE","body":"**What Grafana version are you using?** 5.0.1 \r\n**What datasource are you using?** InfluxDB\r\n**What OS are you running grafana on?** Linux\r\n\r\n**What did you do?**\r\nIn a dashboard that's set to display charts in UTC, I did a CSV export. In the export, \"Time Date Format\" was kept set to the default `YYYY-MM-DDTHH:mm:ssZ`\r\n\r\n**What was the expected result?**\r\nI expected the CSV export to contain ISO 8601 timestamps in UTC, e.g. `2018-03-26T19:14:00Z`.\r\n\r\nThis is indeed the behavior on an older Grafana 4.3 instance I was running previously, from where this dashboard was imported.\r\n\r\n**What happened instead?**\r\nThe CSV export contained timestamps in local time, including timezone offset. E.g. `2018-03-26T15:14:00-04:00`. Attempts to work around this, such as removing the `Z` from the \"Time Date Format\" simply removed the timezone offset (e.g. leaving `2018-03-26T15:14:00` in local time).\r\n\r\nThis behavior persists whether exporting series as rows or columns, and no matter whether \"Excel CSV Dialect\" is ticked or not.\r\n\r\nThis behavior is also described in https://github.com/grafana/grafana/issues/10497, but somehow tagged as a \"feature request\". I believe it to be a bug, based on the following factors:\r\n- Probably unintended change in behavior with respect to Grafana 4\r\n- `YYYY-MM-DDTHH:mm:ssZ` denotes the ISO 8601 format for UTC time. The `Z` should not ordinarily be interpreted as \"timezone offset\" - though I appreciate there is some ambiguity here"},"comment":{"url":"https://api.github.com/repos/grafana/grafana/issues/comments/377135237","html_url":"https://github.com/grafana/grafana/issues/11427#issuecomment-377135237","issue_url":"https://api.github.com/repos/grafana/grafana/issues/11427","id":377135237,"user":{"login":"marefr","id":1668778,"avatar_url":"https://avatars0.githubusercontent.com/u/1668778?v=4","gravatar_id":"","url":"https://api.github.com/users/marefr","html_url":"https://github.com/marefr","followers_url":"https://api.github.com/users/marefr/followers","following_url":"https://api.github.com/users/marefr/following{/other_user}","gists_url":"https://api.github.com/users/marefr/gists{/gist_id}","starred_url":"https://api.github.com/users/marefr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marefr/subscriptions","organizations_url":"https://api.github.com/users/marefr/orgs","repos_url":"https://api.github.com/users/marefr/repos","events_url":"https://api.github.com/users/marefr/events{/privacy}","received_events_url":"https://api.github.com/users/marefr/received_events","type":"User","site_admin":false},"created_at":"2018-03-29T06:27:09Z","updated_at":"2018-03-29T06:27:09Z","author_association":"MEMBER","body":"Confirmed that it doesn't take dashboard timezone into consideration. If that's a bug or lack of feature can be discussed. Maybe unintended support initially why the change to moment js didn't take this into account.   \r\n\r\nWill close this as duplicate of #10497 and at the same time label that issue as bug instead.\r\n\r\nContributions are always welcome and we appreciate if you target #10497 then instead of this issue. Some recommendations for contributing:\r\n* Should take dashboard timezone setting into consideration for creating csv file. If you search code base you'll find that dashboard.isTimezoneUtc() probably is what you want to use and that should be available in each panel.\r\n* your changes need to take all core panels into considerations that have export to csv functionality\r\n* file_export.ts and file_export.jest.ts are the files responsible for creating csv file - needs to take isUtc argument or similar\r\n* export_data_modal.ts is the modal before export - needs to take isUtc argument or similar\r\n\r\nThanks for the report and good luck with the contribution!"}},"public":true,"created_at":"2018-03-29T06:27:09Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7451959127","type":"IssueCommentEvent","actor":{"id":26417264,"login":"alrghods","display_login":"alrghods","gravatar_id":"","url":"https://api.github.com/users/alrghods","avatar_url":"https://avatars.githubusercontent.com/u/26417264?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/grafana/grafana/issues/4645","repository_url":"https://api.github.com/repos/grafana/grafana","labels_url":"https://api.github.com/repos/grafana/grafana/issues/4645/labels{/name}","comments_url":"https://api.github.com/repos/grafana/grafana/issues/4645/comments","events_url":"https://api.github.com/repos/grafana/grafana/issues/4645/events","html_url":"https://github.com/grafana/grafana/issues/4645","id":147407456,"number":4645,"title":"[Feature Request] Save graph series visibility","user":{"login":"troky","id":5564542,"avatar_url":"https://avatars0.githubusercontent.com/u/5564542?v=4","gravatar_id":"","url":"https://api.github.com/users/troky","html_url":"https://github.com/troky","followers_url":"https://api.github.com/users/troky/followers","following_url":"https://api.github.com/users/troky/following{/other_user}","gists_url":"https://api.github.com/users/troky/gists{/gist_id}","starred_url":"https://api.github.com/users/troky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/troky/subscriptions","organizations_url":"https://api.github.com/users/troky/orgs","repos_url":"https://api.github.com/users/troky/repos","events_url":"https://api.github.com/users/troky/events{/privacy}","received_events_url":"https://api.github.com/users/troky/received_events","type":"User","site_admin":false},"labels":[{"id":108770151,"url":"https://api.github.com/repos/grafana/grafana/labels/comp:%20panel/graph","name":"comp: panel/graph","color":"c7def8","default":false},{"id":81198721,"url":"https://api.github.com/repos/grafana/grafana/labels/type:%20feature%20request","name":"type: feature request","color":"dddddd","default":false}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2016-04-11T12:07:57Z","updated_at":"2018-03-29T06:20:41Z","closed_at":null,"author_association":"NONE","body":"Maybe this option exists but I can't find it.\n\nI want to preserve graph series visibility in legend.\n\nFor example:\n![2016-04-11 13_50_10-grafana - single energy meter](https://cloud.githubusercontent.com/assets/5564542/14426142/fcc7747a-ffec-11e5-85c4-538d652a4d76.png)\n\nI want to keep Qt, St and Remain time series displayed in legend but hidden from graph.\n\nIs that possible?\n"},"comment":{"url":"https://api.github.com/repos/grafana/grafana/issues/comments/377134102","html_url":"https://github.com/grafana/grafana/issues/4645#issuecomment-377134102","issue_url":"https://api.github.com/repos/grafana/grafana/issues/4645","id":377134102,"user":{"login":"alrghods","id":26417264,"avatar_url":"https://avatars0.githubusercontent.com/u/26417264?v=4","gravatar_id":"","url":"https://api.github.com/users/alrghods","html_url":"https://github.com/alrghods","followers_url":"https://api.github.com/users/alrghods/followers","following_url":"https://api.github.com/users/alrghods/following{/other_user}","gists_url":"https://api.github.com/users/alrghods/gists{/gist_id}","starred_url":"https://api.github.com/users/alrghods/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alrghods/subscriptions","organizations_url":"https://api.github.com/users/alrghods/orgs","repos_url":"https://api.github.com/users/alrghods/repos","events_url":"https://api.github.com/users/alrghods/events{/privacy}","received_events_url":"https://api.github.com/users/alrghods/received_events","type":"User","site_admin":false},"created_at":"2018-03-29T06:20:41Z","updated_at":"2018-03-29T06:20:41Z","author_association":"NONE","body":"+1"}},"public":true,"created_at":"2018-03-29T06:20:41Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7451800625","type":"WatchEvent","actor":{"id":4554663,"login":"foright","display_login":"foright","gravatar_id":"","url":"https://api.github.com/users/foright","avatar_url":"https://avatars.githubusercontent.com/u/4554663?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"action":"started"},"public":true,"created_at":"2018-03-29T05:23:44Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7451698640","type":"WatchEvent","actor":{"id":4588408,"login":"wahyudibo","display_login":"wahyudibo","gravatar_id":"","url":"https://api.github.com/users/wahyudibo","avatar_url":"https://avatars.githubusercontent.com/u/4588408?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"action":"started"},"public":true,"created_at":"2018-03-29T04:40:37Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7451635651","type":"WatchEvent","actor":{"id":710133,"login":"kongque","display_login":"kongque","gravatar_id":"","url":"https://api.github.com/users/kongque","avatar_url":"https://avatars.githubusercontent.com/u/710133?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"action":"started"},"public":true,"created_at":"2018-03-29T04:13:02Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7451630511","type":"IssueCommentEvent","actor":{"id":10999,"login":"torkelo","display_login":"torkelo","gravatar_id":"","url":"https://api.github.com/users/torkelo","avatar_url":"https://avatars.githubusercontent.com/u/10999?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/grafana/grafana/issues/11422","repository_url":"https://api.github.com/repos/grafana/grafana","labels_url":"https://api.github.com/repos/grafana/grafana/issues/11422/labels{/name}","comments_url":"https://api.github.com/repos/grafana/grafana/issues/11422/comments","events_url":"https://api.github.com/repos/grafana/grafana/issues/11422/events","html_url":"https://github.com/grafana/grafana/pull/11422","id":309391563,"number":11422,"title":"[WIP]Permission list UX","user":{"login":"Ijin08","id":23470681,"avatar_url":"https://avatars2.githubusercontent.com/u/23470681?v=4","gravatar_id":"","url":"https://api.github.com/users/Ijin08","html_url":"https://github.com/Ijin08","followers_url":"https://api.github.com/users/Ijin08/followers","following_url":"https://api.github.com/users/Ijin08/following{/other_user}","gists_url":"https://api.github.com/users/Ijin08/gists{/gist_id}","starred_url":"https://api.github.com/users/Ijin08/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ijin08/subscriptions","organizations_url":"https://api.github.com/users/Ijin08/orgs","repos_url":"https://api.github.com/users/Ijin08/repos","events_url":"https://api.github.com/users/Ijin08/events{/privacy}","received_events_url":"https://api.github.com/users/Ijin08/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-03-28T14:28:07Z","updated_at":"2018-03-29T04:10:55Z","closed_at":null,"author_association":"CONTRIBUTOR","pull_request":{"url":"https://api.github.com/repos/grafana/grafana/pulls/11422","html_url":"https://github.com/grafana/grafana/pull/11422","diff_url":"https://github.com/grafana/grafana/pull/11422.diff","patch_url":"https://github.com/grafana/grafana/pull/11422.patch"},"body":"Fixes #10747\r\n\r\n<img width=\"1052\" alt=\"skarmavbild 2018-03-28 kl 16 25 11\" src=\"https://user-images.githubusercontent.com/23470681/38035548-ef39435a-32a4-11e8-9280-0951318ac2aa.png\">\r\n"},"comment":{"url":"https://api.github.com/repos/grafana/grafana/issues/comments/377115507","html_url":"https://github.com/grafana/grafana/pull/11422#issuecomment-377115507","issue_url":"https://api.github.com/repos/grafana/grafana/issues/11422","id":377115507,"user":{"login":"torkelo","id":10999,"avatar_url":"https://avatars3.githubusercontent.com/u/10999?v=4","gravatar_id":"","url":"https://api.github.com/users/torkelo","html_url":"https://github.com/torkelo","followers_url":"https://api.github.com/users/torkelo/followers","following_url":"https://api.github.com/users/torkelo/following{/other_user}","gists_url":"https://api.github.com/users/torkelo/gists{/gist_id}","starred_url":"https://api.github.com/users/torkelo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/torkelo/subscriptions","organizations_url":"https://api.github.com/users/torkelo/orgs","repos_url":"https://api.github.com/users/torkelo/repos","events_url":"https://api.github.com/users/torkelo/events{/privacy}","received_events_url":"https://api.github.com/users/torkelo/received_events","type":"User","site_admin":false},"created_at":"2018-03-29T04:10:55Z","updated_at":"2018-03-29T04:10:55Z","author_association":"OWNER","body":"this needs to be rebased on master (please have daniel or someone help you with that) "}},"public":true,"created_at":"2018-03-29T04:10:56Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7451623000","type":"IssueCommentEvent","actor":{"id":10999,"login":"torkelo","display_login":"torkelo","gravatar_id":"","url":"https://api.github.com/users/torkelo","avatar_url":"https://avatars.githubusercontent.com/u/10999?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/grafana/grafana/issues/11252","repository_url":"https://api.github.com/repos/grafana/grafana","labels_url":"https://api.github.com/repos/grafana/grafana/issues/11252/labels{/name}","comments_url":"https://api.github.com/repos/grafana/grafana/issues/11252/comments","events_url":"https://api.github.com/repos/grafana/grafana/issues/11252/events","html_url":"https://github.com/grafana/grafana/issues/11252","id":305301536,"number":11252,"title":"When Ctrl-F on a long listing page, a browser not scrolling automatically to a found occurrence.","user":{"login":"darkblaze69","id":6976920,"avatar_url":"https://avatars0.githubusercontent.com/u/6976920?v=4","gravatar_id":"","url":"https://api.github.com/users/darkblaze69","html_url":"https://github.com/darkblaze69","followers_url":"https://api.github.com/users/darkblaze69/followers","following_url":"https://api.github.com/users/darkblaze69/following{/other_user}","gists_url":"https://api.github.com/users/darkblaze69/gists{/gist_id}","starred_url":"https://api.github.com/users/darkblaze69/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/darkblaze69/subscriptions","organizations_url":"https://api.github.com/users/darkblaze69/orgs","repos_url":"https://api.github.com/users/darkblaze69/repos","events_url":"https://api.github.com/users/darkblaze69/events{/privacy}","received_events_url":"https://api.github.com/users/darkblaze69/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-03-14T19:39:39Z","updated_at":"2018-03-29T04:07:51Z","closed_at":null,"author_association":"NONE","body":"Grafana 5 / Windows 10 / Firefox 52.6 ESR and Chrome 65.\r\nIf doing Ctrl-F (I'm looking for a word) on a long listing page particularly Server Admin > Settings, the page not scrolling automatically to a first found word as expected. 'Find dialog' just shows a number of occurrences. But even arrows down/up dialog buttons not working in the 'Find dialog'. F3 is also useless to cycle through occurrences."},"comment":{"url":"https://api.github.com/repos/grafana/grafana/issues/comments/377115127","html_url":"https://github.com/grafana/grafana/issues/11252#issuecomment-377115127","issue_url":"https://api.github.com/repos/grafana/grafana/issues/11252","id":377115127,"user":{"login":"torkelo","id":10999,"avatar_url":"https://avatars3.githubusercontent.com/u/10999?v=4","gravatar_id":"","url":"https://api.github.com/users/torkelo","html_url":"https://github.com/torkelo","followers_url":"https://api.github.com/users/torkelo/followers","following_url":"https://api.github.com/users/torkelo/following{/other_user}","gists_url":"https://api.github.com/users/torkelo/gists{/gist_id}","starred_url":"https://api.github.com/users/torkelo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/torkelo/subscriptions","organizations_url":"https://api.github.com/users/torkelo/orgs","repos_url":"https://api.github.com/users/torkelo/repos","events_url":"https://api.github.com/users/torkelo/events{/privacy}","received_events_url":"https://api.github.com/users/torkelo/received_events","type":"User","site_admin":false},"created_at":"2018-03-29T04:07:51Z","updated_at":"2018-03-29T04:07:51Z","author_association":"OWNER","body":"related to the scroll component we use in v5, discussed here, https://github.com/grafana/grafana/search?q=scroll+&type=Issues&utf8=%E2%9C%93 we are investigating alternatives that will restore native behaviors"}},"public":true,"created_at":"2018-03-29T04:07:51Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7451614404","type":"IssueCommentEvent","actor":{"id":10999,"login":"torkelo","display_login":"torkelo","gravatar_id":"","url":"https://api.github.com/users/torkelo","avatar_url":"https://avatars.githubusercontent.com/u/10999?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/grafana/grafana/issues/9633","repository_url":"https://api.github.com/repos/grafana/grafana","labels_url":"https://api.github.com/repos/grafana/grafana/issues/9633/labels{/name}","comments_url":"https://api.github.com/repos/grafana/grafana/issues/9633/comments","events_url":"https://api.github.com/repos/grafana/grafana/issues/9633/events","html_url":"https://github.com/grafana/grafana/issues/9633","id":267914028,"number":9633,"title":"Improve the build tooling and CI/CD pipeline for Grafana","user":{"login":"torkelo","id":10999,"avatar_url":"https://avatars3.githubusercontent.com/u/10999?v=4","gravatar_id":"","url":"https://api.github.com/users/torkelo","html_url":"https://github.com/torkelo","followers_url":"https://api.github.com/users/torkelo/followers","following_url":"https://api.github.com/users/torkelo/following{/other_user}","gists_url":"https://api.github.com/users/torkelo/gists{/gist_id}","starred_url":"https://api.github.com/users/torkelo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/torkelo/subscriptions","organizations_url":"https://api.github.com/users/torkelo/orgs","repos_url":"https://api.github.com/users/torkelo/repos","events_url":"https://api.github.com/users/torkelo/events{/privacy}","received_events_url":"https://api.github.com/users/torkelo/received_events","type":"User","site_admin":false},"labels":[{"id":258111638,"url":"https://api.github.com/repos/grafana/grafana/labels/type:%20build%20&%20packaging","name":"type: build & packaging","color":"dddddd","default":false},{"id":120793281,"url":"https://api.github.com/repos/grafana/grafana/labels/type:%20tech","name":"type: tech","color":"dddddd","default":false}],"state":"open","locked":false,"assignee":{"login":"xlson","id":114937,"avatar_url":"https://avatars1.githubusercontent.com/u/114937?v=4","gravatar_id":"","url":"https://api.github.com/users/xlson","html_url":"https://github.com/xlson","followers_url":"https://api.github.com/users/xlson/followers","following_url":"https://api.github.com/users/xlson/following{/other_user}","gists_url":"https://api.github.com/users/xlson/gists{/gist_id}","starred_url":"https://api.github.com/users/xlson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xlson/subscriptions","organizations_url":"https://api.github.com/users/xlson/orgs","repos_url":"https://api.github.com/users/xlson/repos","events_url":"https://api.github.com/users/xlson/events{/privacy}","received_events_url":"https://api.github.com/users/xlson/received_events","type":"User","site_admin":false},"assignees":[{"login":"xlson","id":114937,"avatar_url":"https://avatars1.githubusercontent.com/u/114937?v=4","gravatar_id":"","url":"https://api.github.com/users/xlson","html_url":"https://github.com/xlson","followers_url":"https://api.github.com/users/xlson/followers","following_url":"https://api.github.com/users/xlson/following{/other_user}","gists_url":"https://api.github.com/users/xlson/gists{/gist_id}","starred_url":"https://api.github.com/users/xlson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xlson/subscriptions","organizations_url":"https://api.github.com/users/xlson/orgs","repos_url":"https://api.github.com/users/xlson/repos","events_url":"https://api.github.com/users/xlson/events{/privacy}","received_events_url":"https://api.github.com/users/xlson/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/grafana/grafana/milestones/76","html_url":"https://github.com/grafana/grafana/milestone/76","labels_url":"https://api.github.com/repos/grafana/grafana/milestones/76/labels","id":2863993,"number":76,"title":"5.1","description":"","creator":{"login":"torkelo","id":10999,"avatar_url":"https://avatars3.githubusercontent.com/u/10999?v=4","gravatar_id":"","url":"https://api.github.com/users/torkelo","html_url":"https://github.com/torkelo","followers_url":"https://api.github.com/users/torkelo/followers","following_url":"https://api.github.com/users/torkelo/following{/other_user}","gists_url":"https://api.github.com/users/torkelo/gists{/gist_id}","starred_url":"https://api.github.com/users/torkelo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/torkelo/subscriptions","organizations_url":"https://api.github.com/users/torkelo/orgs","repos_url":"https://api.github.com/users/torkelo/repos","events_url":"https://api.github.com/users/torkelo/events{/privacy}","received_events_url":"https://api.github.com/users/torkelo/received_events","type":"User","site_admin":false},"open_issues":29,"closed_issues":51,"state":"open","created_at":"2017-10-25T06:41:05Z","updated_at":"2018-03-28T20:54:36Z","due_on":null,"closed_at":null},"comments":6,"created_at":"2017-10-24T06:38:59Z","updated_at":"2018-03-29T04:04:16Z","closed_at":null,"author_association":"OWNER","body":"- [x] Document the steps in our current build & deploy process\r\n- [x] Replace the current process with one based on the CircleCI 2.0 poc\r\n  - [x] Create separate build container\r\n  - [x] Add build to workflow\r\n  - [x] Sign build artifacts\r\n  - [x] Deploy build artifacts\r\n  - [x] Testing and cleanup\r\n- [ ] Seperate stable and beta release \r\n- [ ] Setup build for the build container\r\n- [ ] Introduce xgo or golang-cross to be able to build for windows/linux/mac\r\n- [ ] Figure out what the easiest things we can do to speed up the builds is\r\n- [ ] Speed up the build (only low hanging fruit)\r\n- [ ] Test changes on mysql, postegres and sqlite\r\n- [ ] Run integration tests\r\n- [ ] Simplify release (automate further)"},"comment":{"url":"https://api.github.com/repos/grafana/grafana/issues/comments/377114690","html_url":"https://github.com/grafana/grafana/issues/9633#issuecomment-377114690","issue_url":"https://api.github.com/repos/grafana/grafana/issues/9633","id":377114690,"user":{"login":"torkelo","id":10999,"avatar_url":"https://avatars3.githubusercontent.com/u/10999?v=4","gravatar_id":"","url":"https://api.github.com/users/torkelo","html_url":"https://github.com/torkelo","followers_url":"https://api.github.com/users/torkelo/followers","following_url":"https://api.github.com/users/torkelo/following{/other_user}","gists_url":"https://api.github.com/users/torkelo/gists{/gist_id}","starred_url":"https://api.github.com/users/torkelo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/torkelo/subscriptions","organizations_url":"https://api.github.com/users/torkelo/orgs","repos_url":"https://api.github.com/users/torkelo/repos","events_url":"https://api.github.com/users/torkelo/events{/privacy}","received_events_url":"https://api.github.com/users/torkelo/received_events","type":"User","site_admin":false},"created_at":"2018-03-29T04:04:15Z","updated_at":"2018-03-29T04:04:15Z","author_association":"OWNER","body":"but why not use xgo? it just a prepped docker container with all of those dependencies. Sure we can redo that in our own build container but what is the advantage? "}},"public":true,"created_at":"2018-03-29T04:04:16Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7451509897","type":"WatchEvent","actor":{"id":12699258,"login":"galenjiang","display_login":"galenjiang","gravatar_id":"","url":"https://api.github.com/users/galenjiang","avatar_url":"https://avatars.githubusercontent.com/u/12699258?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"action":"started"},"public":true,"created_at":"2018-03-29T03:24:26Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7451501376","type":"WatchEvent","actor":{"id":3185671,"login":"swtang","display_login":"swtang","gravatar_id":"","url":"https://api.github.com/users/swtang","avatar_url":"https://avatars.githubusercontent.com/u/3185671?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"action":"started"},"public":true,"created_at":"2018-03-29T03:21:32Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7451469530","type":"WatchEvent","actor":{"id":12542854,"login":"wangzhiman","display_login":"wangzhiman","gravatar_id":"","url":"https://api.github.com/users/wangzhiman","avatar_url":"https://avatars.githubusercontent.com/u/12542854?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"action":"started"},"public":true,"created_at":"2018-03-29T03:09:13Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7451375820","type":"IssueCommentEvent","actor":{"id":455978,"login":"jiming","display_login":"jiming","gravatar_id":"","url":"https://api.github.com/users/jiming","avatar_url":"https://avatars.githubusercontent.com/u/455978?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/grafana/grafana/issues/10461","repository_url":"https://api.github.com/repos/grafana/grafana","labels_url":"https://api.github.com/repos/grafana/grafana/issues/10461/labels{/name}","comments_url":"https://api.github.com/repos/grafana/grafana/issues/10461/comments","events_url":"https://api.github.com/repos/grafana/grafana/issues/10461/events","html_url":"https://github.com/grafana/grafana/issues/10461","id":287025573,"number":10461,"title":"[bug] prometheus datasource multi-value template variable expand incorrect","user":{"login":"jiming","id":455978,"avatar_url":"https://avatars0.githubusercontent.com/u/455978?v=4","gravatar_id":"","url":"https://api.github.com/users/jiming","html_url":"https://github.com/jiming","followers_url":"https://api.github.com/users/jiming/followers","following_url":"https://api.github.com/users/jiming/following{/other_user}","gists_url":"https://api.github.com/users/jiming/gists{/gist_id}","starred_url":"https://api.github.com/users/jiming/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiming/subscriptions","organizations_url":"https://api.github.com/users/jiming/orgs","repos_url":"https://api.github.com/users/jiming/repos","events_url":"https://api.github.com/users/jiming/events{/privacy}","received_events_url":"https://api.github.com/users/jiming/received_events","type":"User","site_admin":false},"labels":[{"id":120793823,"url":"https://api.github.com/repos/grafana/grafana/labels/state:%20needs%20more%20detail","name":"state: needs more detail","color":"1d76db","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2018-01-09T09:41:59Z","updated_at":"2018-03-29T02:34:48Z","closed_at":"2018-01-11T08:12:33Z","author_association":"NONE","body":"\r\nPlease include this information:\r\n- What Grafana version are you using?\r\n   4.6.3\r\n- What datasource are you using?\r\n  prometheus 2.0\r\n- What OS are you running grafana on?\r\n  ubuntu 16.04\r\n- What did you do?\r\n  plot multiple line with `  by (service)`\r\n- What was the expected result?\r\n   plot multiple line\r\n- What happened instead?\r\n   plot only the first \r\n- If related to metric query / data viz:\r\n  `sum(rpc_durations_seconds{service=~'$serviceName'}) by (service)` only draw one line, I already selected `normal and uniform`, which is wrong  \r\n   query inspector result is, which replace the $serviceName as `normal` instead of `(normal|uniform)` as document described\r\n```\r\nxhrStatus:\"complete\"\r\nrequest:Object\r\nmethod:\"GET\"\r\nurl:\"http://kudu:9090/api/v1/query_range?query=sum(rpc_durations_seconds%7Bservice%3D~'normal'%7D)%20by%20(service)&start=1515404291&end=1515490631&step=600\"\r\n```\r\n\r\n  - `sum(rpc_durations_seconds{service=~'normal|uniform'}) by (service)` draw two line correctly\r\n \r\nfrom https://community.grafana.com/t/single-graph-with-multiple-plots-for-multi-value-template-variable/856 \r\n\r\nI found some hint.\r\n I tried the play.grafana.com, which is correct. So I guess it is a new bug introduced in newer version.\r\n\r\nThanks!\r\n\r\nJiming\r\n\r\n\r\n"},"comment":{"url":"https://api.github.com/repos/grafana/grafana/issues/comments/377101453","html_url":"https://github.com/grafana/grafana/issues/10461#issuecomment-377101453","issue_url":"https://api.github.com/repos/grafana/grafana/issues/10461","id":377101453,"user":{"login":"jiming","id":455978,"avatar_url":"https://avatars0.githubusercontent.com/u/455978?v=4","gravatar_id":"","url":"https://api.github.com/users/jiming","html_url":"https://github.com/jiming","followers_url":"https://api.github.com/users/jiming/followers","following_url":"https://api.github.com/users/jiming/following{/other_user}","gists_url":"https://api.github.com/users/jiming/gists{/gist_id}","starred_url":"https://api.github.com/users/jiming/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiming/subscriptions","organizations_url":"https://api.github.com/users/jiming/orgs","repos_url":"https://api.github.com/users/jiming/repos","events_url":"https://api.github.com/users/jiming/events{/privacy}","received_events_url":"https://api.github.com/users/jiming/received_events","type":"User","site_admin":false},"created_at":"2018-03-29T02:34:48Z","updated_at":"2018-03-29T02:34:48Z","author_association":"NONE","body":"Thanks @tettaji"}},"public":true,"created_at":"2018-03-29T02:34:48Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7451302158","type":"WatchEvent","actor":{"id":8662447,"login":"JamesLinus","display_login":"JamesLinus","gravatar_id":"","url":"https://api.github.com/users/JamesLinus","avatar_url":"https://avatars.githubusercontent.com/u/8662447?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"action":"started"},"public":true,"created_at":"2018-03-29T02:07:21Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7451256588","type":"ForkEvent","actor":{"id":37574868,"login":"aimukei","display_login":"aimukei","gravatar_id":"","url":"https://api.github.com/users/aimukei","avatar_url":"https://avatars.githubusercontent.com/u/37574868?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"forkee":{"id":127221667,"name":"grafana","full_name":"aimukei/grafana","owner":{"login":"aimukei","id":37574868,"avatar_url":"https://avatars3.githubusercontent.com/u/37574868?v=4","gravatar_id":"","url":"https://api.github.com/users/aimukei","html_url":"https://github.com/aimukei","followers_url":"https://api.github.com/users/aimukei/followers","following_url":"https://api.github.com/users/aimukei/following{/other_user}","gists_url":"https://api.github.com/users/aimukei/gists{/gist_id}","starred_url":"https://api.github.com/users/aimukei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aimukei/subscriptions","organizations_url":"https://api.github.com/users/aimukei/orgs","repos_url":"https://api.github.com/users/aimukei/repos","events_url":"https://api.github.com/users/aimukei/events{/privacy}","received_events_url":"https://api.github.com/users/aimukei/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/aimukei/grafana","description":"The tool for beautiful monitoring and metric analytics & dashboards for Graphite, InfluxDB & Prometheus & More","fork":true,"url":"https://api.github.com/repos/aimukei/grafana","forks_url":"https://api.github.com/repos/aimukei/grafana/forks","keys_url":"https://api.github.com/repos/aimukei/grafana/keys{/key_id}","collaborators_url":"https://api.github.com/repos/aimukei/grafana/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/aimukei/grafana/teams","hooks_url":"https://api.github.com/repos/aimukei/grafana/hooks","issue_events_url":"https://api.github.com/repos/aimukei/grafana/issues/events{/number}","events_url":"https://api.github.com/repos/aimukei/grafana/events","assignees_url":"https://api.github.com/repos/aimukei/grafana/assignees{/user}","branches_url":"https://api.github.com/repos/aimukei/grafana/branches{/branch}","tags_url":"https://api.github.com/repos/aimukei/grafana/tags","blobs_url":"https://api.github.com/repos/aimukei/grafana/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/aimukei/grafana/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/aimukei/grafana/git/refs{/sha}","trees_url":"https://api.github.com/repos/aimukei/grafana/git/trees{/sha}","statuses_url":"https://api.github.com/repos/aimukei/grafana/statuses/{sha}","languages_url":"https://api.github.com/repos/aimukei/grafana/languages","stargazers_url":"https://api.github.com/repos/aimukei/grafana/stargazers","contributors_url":"https://api.github.com/repos/aimukei/grafana/contributors","subscribers_url":"https://api.github.com/repos/aimukei/grafana/subscribers","subscription_url":"https://api.github.com/repos/aimukei/grafana/subscription","commits_url":"https://api.github.com/repos/aimukei/grafana/commits{/sha}","git_commits_url":"https://api.github.com/repos/aimukei/grafana/git/commits{/sha}","comments_url":"https://api.github.com/repos/aimukei/grafana/comments{/number}","issue_comment_url":"https://api.github.com/repos/aimukei/grafana/issues/comments{/number}","contents_url":"https://api.github.com/repos/aimukei/grafana/contents/{+path}","compare_url":"https://api.github.com/repos/aimukei/grafana/compare/{base}...{head}","merges_url":"https://api.github.com/repos/aimukei/grafana/merges","archive_url":"https://api.github.com/repos/aimukei/grafana/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/aimukei/grafana/downloads","issues_url":"https://api.github.com/repos/aimukei/grafana/issues{/number}","pulls_url":"https://api.github.com/repos/aimukei/grafana/pulls{/number}","milestones_url":"https://api.github.com/repos/aimukei/grafana/milestones{/number}","notifications_url":"https://api.github.com/repos/aimukei/grafana/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/aimukei/grafana/labels{/name}","releases_url":"https://api.github.com/repos/aimukei/grafana/releases{/id}","deployments_url":"https://api.github.com/repos/aimukei/grafana/deployments","created_at":"2018-03-29T01:50:39Z","updated_at":"2018-03-29T00:36:25Z","pushed_at":"2018-03-29T01:31:01Z","git_url":"git://github.com/aimukei/grafana.git","ssh_url":"git@github.com:aimukei/grafana.git","clone_url":"https://github.com/aimukei/grafana.git","svn_url":"https://github.com/aimukei/grafana","homepage":"https://grafana.com","size":178776,"stargazers_count":0,"watchers_count":0,"language":null,"has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"archived":false,"open_issues_count":0,"license":null,"forks":0,"open_issues":0,"watchers":0,"default_branch":"master","public":true}},"public":true,"created_at":"2018-03-29T01:50:39Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7451203598","type":"PushEvent","actor":{"id":1443603,"login":"DanCech","display_login":"DanCech","gravatar_id":"","url":"https://api.github.com/users/DanCech","avatar_url":"https://avatars.githubusercontent.com/u/1443603?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"push_id":2441617729,"size":1,"distinct_size":1,"ref":"refs/heads/external-auth","head":"8f1aea27a4900ab18b51df65af1ac27c8e28c562","before":"76b42b9092acad737656c77e5fff2567392d96be","commits":[{"sha":"8f1aea27a4900ab18b51df65af1ac27c8e28c562","author":{"email":"dcech@grafana.com","name":"Dan Cech"},"message":"fix ldap test","distinct":true,"url":"https://api.github.com/repos/grafana/grafana/commits/8f1aea27a4900ab18b51df65af1ac27c8e28c562"}]},"public":true,"created_at":"2018-03-29T01:31:00Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7451197514","type":"PullRequestReviewCommentEvent","actor":{"id":1443603,"login":"DanCech","display_login":"DanCech","gravatar_id":"","url":"https://api.github.com/users/DanCech","avatar_url":"https://avatars.githubusercontent.com/u/1443603?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/grafana/grafana/pulls/comments/177933474","pull_request_review_id":107901933,"id":177933474,"diff_hunk":"@@ -0,0 +1,133 @@\n+package sqlstore\n+\n+import (\n+\t\"time\"\n+\n+\t\"github.com/grafana/grafana/pkg/bus\"\n+\tm \"github.com/grafana/grafana/pkg/models\"\n+)\n+\n+func init() {\n+\tbus.AddHandler(\"sql\", GetUserByAuthInfo)\n+\tbus.AddHandler(\"sql\", GetAuthInfo)\n+\tbus.AddHandler(\"sql\", SetAuthInfo)\n+\tbus.AddHandler(\"sql\", DeleteAuthInfo)\n+}\n+\n+func GetUserByAuthInfo(query *m.GetUserByAuthInfoQuery) error {\n+\tuser := &m.User{}\n+\thas := false\n+\tvar err error\n+\n+\t// Try to find the user by auth module and id first\n+\tif query.AuthModule != \"\" && query.AuthId != \"\" {\n+\t\tauthQuery := &m.GetAuthInfoQuery{\n+\t\t\tAuthModule: query.AuthModule,\n+\t\t\tAuthId:     query.AuthId,\n+\t\t}\n+\n+\t\terr = GetAuthInfo(authQuery)\n+\t\t// if user id was specified and doesn't match the user_auth entry, remove it\n+\t\tif err == nil && query.UserId != 0 && query.UserId != authQuery.UserAuth.UserId {\n+\t\t\tDeleteAuthInfo(&m.DeleteAuthInfoCommand{","path":"pkg/services/sqlstore/user_auth.go","position":null,"original_position":32,"commit_id":"76b42b9092acad737656c77e5fff2567392d96be","original_commit_id":"3127cab9fa70513775f519210fba4c2713fd36fe","user":{"login":"DanCech","id":1443603,"avatar_url":"https://avatars0.githubusercontent.com/u/1443603?v=4","gravatar_id":"","url":"https://api.github.com/users/DanCech","html_url":"https://github.com/DanCech","followers_url":"https://api.github.com/users/DanCech/followers","following_url":"https://api.github.com/users/DanCech/following{/other_user}","gists_url":"https://api.github.com/users/DanCech/gists{/gist_id}","starred_url":"https://api.github.com/users/DanCech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanCech/subscriptions","organizations_url":"https://api.github.com/users/DanCech/orgs","repos_url":"https://api.github.com/users/DanCech/repos","events_url":"https://api.github.com/users/DanCech/events{/privacy}","received_events_url":"https://api.github.com/users/DanCech/received_events","type":"User","site_admin":false},"body":"Yeah, I added some error logging there.","created_at":"2018-03-29T01:28:39Z","updated_at":"2018-03-29T01:28:39Z","html_url":"https://github.com/grafana/grafana/pull/11354#discussion_r177933474","pull_request_url":"https://api.github.com/repos/grafana/grafana/pulls/11354","author_association":"CONTRIBUTOR","_links":{"self":{"href":"https://api.github.com/repos/grafana/grafana/pulls/comments/177933474"},"html":{"href":"https://github.com/grafana/grafana/pull/11354#discussion_r177933474"},"pull_request":{"href":"https://api.github.com/repos/grafana/grafana/pulls/11354"}},"in_reply_to_id":177385594},"pull_request":{"url":"https://api.github.com/repos/grafana/grafana/pulls/11354","id":176914711,"html_url":"https://github.com/grafana/grafana/pull/11354","diff_url":"https://github.com/grafana/grafana/pull/11354.diff","patch_url":"https://github.com/grafana/grafana/pull/11354.patch","issue_url":"https://api.github.com/repos/grafana/grafana/issues/11354","number":11354,"state":"open","locked":false,"title":"[WIP] External auth refactor","user":{"login":"DanCech","id":1443603,"avatar_url":"https://avatars0.githubusercontent.com/u/1443603?v=4","gravatar_id":"","url":"https://api.github.com/users/DanCech","html_url":"https://github.com/DanCech","followers_url":"https://api.github.com/users/DanCech/followers","following_url":"https://api.github.com/users/DanCech/following{/other_user}","gists_url":"https://api.github.com/users/DanCech/gists{/gist_id}","starred_url":"https://api.github.com/users/DanCech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanCech/subscriptions","organizations_url":"https://api.github.com/users/DanCech/orgs","repos_url":"https://api.github.com/users/DanCech/repos","events_url":"https://api.github.com/users/DanCech/events{/privacy}","received_events_url":"https://api.github.com/users/DanCech/received_events","type":"User","site_admin":false},"body":"This PR aims to bring the code used to synchronize Grafana user accounts with external authentication stores into a single workflow, implemented by the `login.UpsertUser` function.  This accepts a `models.ExternalUserInfo` struct and handles checking whether a local account exists, creating or updating it as necessary, managing org membership, and maintaining entries in the new `user_auth` table to link Grafana user accounts to external user accounts.\r\n\r\nThe tests are still quite lacking, and I'm not sure of the best way to implement those.  It may be easier to test if we implement `bus.DispatchReqCtx` and use that instead of calling `login.UpsertUser` directly, but I'm not sure.\r\n\r\nThere are a few behavior changes involved here, since users authenticating via oauth, auth-proxy and ldap now all go through the same account sync, but I have done my best to make sure that we won't break any existing logins.\r\n\r\nThe new user account linking code will work with ldap (based on DN), authproxy (based on the header value) and grafana.com auth (based on user id).  Other oauth/openid providers will need to be extended to return an Id element to take advantage of the `user_auth` table.\r\n\r\nThe other major change to the authproxy system is to avoid the overhead of looking the user up by username/email on every request, it now stores the proxy header value in the session and only does a lookup if the value changed.\r\n\r\nAll feedback appreciated!","created_at":"2018-03-22T21:28:46Z","updated_at":"2018-03-29T01:28:39Z","closed_at":null,"merged_at":null,"merge_commit_sha":"0a30a75f7f32cf06f9def567e9a78852c45e15c2","assignee":{"login":"DanCech","id":1443603,"avatar_url":"https://avatars0.githubusercontent.com/u/1443603?v=4","gravatar_id":"","url":"https://api.github.com/users/DanCech","html_url":"https://github.com/DanCech","followers_url":"https://api.github.com/users/DanCech/followers","following_url":"https://api.github.com/users/DanCech/following{/other_user}","gists_url":"https://api.github.com/users/DanCech/gists{/gist_id}","starred_url":"https://api.github.com/users/DanCech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanCech/subscriptions","organizations_url":"https://api.github.com/users/DanCech/orgs","repos_url":"https://api.github.com/users/DanCech/repos","events_url":"https://api.github.com/users/DanCech/events{/privacy}","received_events_url":"https://api.github.com/users/DanCech/received_events","type":"User","site_admin":false},"assignees":[{"login":"DanCech","id":1443603,"avatar_url":"https://avatars0.githubusercontent.com/u/1443603?v=4","gravatar_id":"","url":"https://api.github.com/users/DanCech","html_url":"https://github.com/DanCech","followers_url":"https://api.github.com/users/DanCech/followers","following_url":"https://api.github.com/users/DanCech/following{/other_user}","gists_url":"https://api.github.com/users/DanCech/gists{/gist_id}","starred_url":"https://api.github.com/users/DanCech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanCech/subscriptions","organizations_url":"https://api.github.com/users/DanCech/orgs","repos_url":"https://api.github.com/users/DanCech/repos","events_url":"https://api.github.com/users/DanCech/events{/privacy}","received_events_url":"https://api.github.com/users/DanCech/received_events","type":"User","site_admin":false}],"requested_reviewers":[],"requested_teams":[],"labels":[{"id":174917589,"url":"https://api.github.com/repos/grafana/grafana/labels/comp:%20backend/auth","name":"comp: backend/auth","color":"c7def8","default":false},{"id":175790974,"url":"https://api.github.com/repos/grafana/grafana/labels/comp:%20backend/user","name":"comp: backend/user","color":"c7def8","default":false},{"id":188534489,"url":"https://api.github.com/repos/grafana/grafana/labels/in%20progress","name":"in progress","color":"ededed","default":false},{"id":70176320,"url":"https://api.github.com/repos/grafana/grafana/labels/type:%20feature","name":"type: feature","color":"dddddd","default":false},{"id":257666655,"url":"https://api.github.com/repos/grafana/grafana/labels/type:%20refactor","name":"type: refactor","color":"dddddd","default":false}],"milestone":{"url":"https://api.github.com/repos/grafana/grafana/milestones/76","html_url":"https://github.com/grafana/grafana/milestone/76","labels_url":"https://api.github.com/repos/grafana/grafana/milestones/76/labels","id":2863993,"number":76,"title":"5.1","description":"","creator":{"login":"torkelo","id":10999,"avatar_url":"https://avatars3.githubusercontent.com/u/10999?v=4","gravatar_id":"","url":"https://api.github.com/users/torkelo","html_url":"https://github.com/torkelo","followers_url":"https://api.github.com/users/torkelo/followers","following_url":"https://api.github.com/users/torkelo/following{/other_user}","gists_url":"https://api.github.com/users/torkelo/gists{/gist_id}","starred_url":"https://api.github.com/users/torkelo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/torkelo/subscriptions","organizations_url":"https://api.github.com/users/torkelo/orgs","repos_url":"https://api.github.com/users/torkelo/repos","events_url":"https://api.github.com/users/torkelo/events{/privacy}","received_events_url":"https://api.github.com/users/torkelo/received_events","type":"User","site_admin":false},"open_issues":29,"closed_issues":51,"state":"open","created_at":"2017-10-25T06:41:05Z","updated_at":"2018-03-28T20:54:36Z","due_on":null,"closed_at":null},"commits_url":"https://api.github.com/repos/grafana/grafana/pulls/11354/commits","review_comments_url":"https://api.github.com/repos/grafana/grafana/pulls/11354/comments","review_comment_url":"https://api.github.com/repos/grafana/grafana/pulls/comments{/number}","comments_url":"https://api.github.com/repos/grafana/grafana/issues/11354/comments","statuses_url":"https://api.github.com/repos/grafana/grafana/statuses/76b42b9092acad737656c77e5fff2567392d96be","head":{"label":"grafana:external-auth","ref":"external-auth","sha":"76b42b9092acad737656c77e5fff2567392d96be","user":{"login":"grafana","id":7195757,"avatar_url":"https://avatars0.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","site_admin":false},"repo":{"id":15111821,"name":"grafana","full_name":"grafana/grafana","owner":{"login":"grafana","id":7195757,"avatar_url":"https://avatars0.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/grafana/grafana","description":"The tool for beautiful monitoring and metric analytics & dashboards for Graphite, InfluxDB & Prometheus & More","fork":false,"url":"https://api.github.com/repos/grafana/grafana","forks_url":"https://api.github.com/repos/grafana/grafana/forks","keys_url":"https://api.github.com/repos/grafana/grafana/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/grafana/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/grafana/teams","hooks_url":"https://api.github.com/repos/grafana/grafana/hooks","issue_events_url":"https://api.github.com/repos/grafana/grafana/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/grafana/events","assignees_url":"https://api.github.com/repos/grafana/grafana/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/grafana/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/grafana/tags","blobs_url":"https://api.github.com/repos/grafana/grafana/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/grafana/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/grafana/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/grafana/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/grafana/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/grafana/languages","stargazers_url":"https://api.github.com/repos/grafana/grafana/stargazers","contributors_url":"https://api.github.com/repos/grafana/grafana/contributors","subscribers_url":"https://api.github.com/repos/grafana/grafana/subscribers","subscription_url":"https://api.github.com/repos/grafana/grafana/subscription","commits_url":"https://api.github.com/repos/grafana/grafana/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/grafana/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/grafana/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/grafana/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/grafana/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/grafana/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/grafana/merges","archive_url":"https://api.github.com/repos/grafana/grafana/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/grafana/downloads","issues_url":"https://api.github.com/repos/grafana/grafana/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/grafana/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/grafana/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/grafana/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/grafana/labels{/name}","releases_url":"https://api.github.com/repos/grafana/grafana/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/grafana/deployments","created_at":"2013-12-11T15:59:56Z","updated_at":"2018-03-29T00:36:25Z","pushed_at":"2018-03-29T01:27:36Z","git_url":"git://github.com/grafana/grafana.git","ssh_url":"git@github.com:grafana/grafana.git","clone_url":"https://github.com/grafana/grafana.git","svn_url":"https://github.com/grafana/grafana","homepage":"https://grafana.com","size":178776,"stargazers_count":20937,"watchers_count":20937,"language":"TypeScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":3677,"mirror_url":null,"archived":false,"open_issues_count":1429,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0"},"forks":3677,"open_issues":1429,"watchers":20937,"default_branch":"master"}},"base":{"label":"grafana:master","ref":"master","sha":"b41370ca498816f444363ed7511dced638dc54f6","user":{"login":"grafana","id":7195757,"avatar_url":"https://avatars0.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","site_admin":false},"repo":{"id":15111821,"name":"grafana","full_name":"grafana/grafana","owner":{"login":"grafana","id":7195757,"avatar_url":"https://avatars0.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/grafana/grafana","description":"The tool for beautiful monitoring and metric analytics & dashboards for Graphite, InfluxDB & Prometheus & More","fork":false,"url":"https://api.github.com/repos/grafana/grafana","forks_url":"https://api.github.com/repos/grafana/grafana/forks","keys_url":"https://api.github.com/repos/grafana/grafana/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/grafana/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/grafana/teams","hooks_url":"https://api.github.com/repos/grafana/grafana/hooks","issue_events_url":"https://api.github.com/repos/grafana/grafana/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/grafana/events","assignees_url":"https://api.github.com/repos/grafana/grafana/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/grafana/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/grafana/tags","blobs_url":"https://api.github.com/repos/grafana/grafana/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/grafana/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/grafana/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/grafana/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/grafana/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/grafana/languages","stargazers_url":"https://api.github.com/repos/grafana/grafana/stargazers","contributors_url":"https://api.github.com/repos/grafana/grafana/contributors","subscribers_url":"https://api.github.com/repos/grafana/grafana/subscribers","subscription_url":"https://api.github.com/repos/grafana/grafana/subscription","commits_url":"https://api.github.com/repos/grafana/grafana/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/grafana/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/grafana/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/grafana/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/grafana/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/grafana/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/grafana/merges","archive_url":"https://api.github.com/repos/grafana/grafana/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/grafana/downloads","issues_url":"https://api.github.com/repos/grafana/grafana/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/grafana/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/grafana/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/grafana/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/grafana/labels{/name}","releases_url":"https://api.github.com/repos/grafana/grafana/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/grafana/deployments","created_at":"2013-12-11T15:59:56Z","updated_at":"2018-03-29T00:36:25Z","pushed_at":"2018-03-29T01:27:36Z","git_url":"git://github.com/grafana/grafana.git","ssh_url":"git@github.com:grafana/grafana.git","clone_url":"https://github.com/grafana/grafana.git","svn_url":"https://github.com/grafana/grafana","homepage":"https://grafana.com","size":178776,"stargazers_count":20937,"watchers_count":20937,"language":"TypeScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":3677,"mirror_url":null,"archived":false,"open_issues_count":1429,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0"},"forks":3677,"open_issues":1429,"watchers":20937,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/grafana/grafana/pulls/11354"},"html":{"href":"https://github.com/grafana/grafana/pull/11354"},"issue":{"href":"https://api.github.com/repos/grafana/grafana/issues/11354"},"comments":{"href":"https://api.github.com/repos/grafana/grafana/issues/11354/comments"},"review_comments":{"href":"https://api.github.com/repos/grafana/grafana/pulls/11354/comments"},"review_comment":{"href":"https://api.github.com/repos/grafana/grafana/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/grafana/grafana/pulls/11354/commits"},"statuses":{"href":"https://api.github.com/repos/grafana/grafana/statuses/76b42b9092acad737656c77e5fff2567392d96be"}},"author_association":"CONTRIBUTOR"}},"public":true,"created_at":"2018-03-29T01:28:39Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7451196968","type":"PullRequestReviewCommentEvent","actor":{"id":1443603,"login":"DanCech","display_login":"DanCech","gravatar_id":"","url":"https://api.github.com/users/DanCech","avatar_url":"https://avatars.githubusercontent.com/u/1443603?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/grafana/grafana/pulls/comments/177933449","pull_request_review_id":107901908,"id":177933449,"diff_hunk":"@@ -0,0 +1,73 @@\n+package models\n+\n+import (\n+\t\"time\"\n+)\n+\n+type UserAuth struct {\n+\tId         int64\n+\tUserId     int64\n+\tAuthModule string\n+\tAuthId     string\n+\tCreated    time.Time\n+}\n+\n+type ExternalUserInfo struct {\n+\tAuthModule string\n+\tAuthId     string\n+\tUserId     int64\n+\tEmail      string\n+\tLogin      string\n+\tName       string\n+\tOrgRoles   map[int64]RoleType\n+}\n+\n+// ---------------------\n+// COMMANDS\n+\n+type UpsertUserCommand struct {\n+\tReqContext    *ReqContext\n+\tExternalUser  *ExternalUserInfo\n+\tSignupAllowed bool\n+\n+\tResult *User\n+}\n+\n+type SetAuthInfoCommand struct {\n+\tAuthModule string\n+\tAuthId     string\n+\tUserId     int64\n+}\n+\n+type DeleteAuthInfoCommand struct {\n+\tUserAuth *UserAuth\n+}\n+\n+// ----------------------\n+// QUERIES\n+\n+type LoginUserQuery struct {\n+\tReqContext *ReqContext\n+\tUsername   string\n+\tPassword   string\n+\tUser       *User\n+\tIpAddress  string\n+}\n+\n+type GetUserByAuthInfoQuery struct {\n+\tAuthModule string\n+\tAuthId     string\n+\tUserId     int64\n+\tEmail      string\n+\tLogin      string\n+\n+\tUser     *User\n+\tUserAuth *UserAuth\n+}\n+\n+type GetAuthInfoQuery struct {\n+\tAuthModule string\n+\tAuthId     string\n+\n+\tUserAuth *UserAuth","path":"pkg/models/user_auth.go","position":null,"original_position":72,"commit_id":"76b42b9092acad737656c77e5fff2567392d96be","original_commit_id":"3127cab9fa70513775f519210fba4c2713fd36fe","user":{"login":"DanCech","id":1443603,"avatar_url":"https://avatars0.githubusercontent.com/u/1443603?v=4","gravatar_id":"","url":"https://api.github.com/users/DanCech","html_url":"https://github.com/DanCech","followers_url":"https://api.github.com/users/DanCech/followers","following_url":"https://api.github.com/users/DanCech/following{/other_user}","gists_url":"https://api.github.com/users/DanCech/gists{/gist_id}","starred_url":"https://api.github.com/users/DanCech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanCech/subscriptions","organizations_url":"https://api.github.com/users/DanCech/orgs","repos_url":"https://api.github.com/users/DanCech/repos","events_url":"https://api.github.com/users/DanCech/events{/privacy}","received_events_url":"https://api.github.com/users/DanCech/received_events","type":"User","site_admin":false},"body":"Done","created_at":"2018-03-29T01:28:28Z","updated_at":"2018-03-29T01:28:28Z","html_url":"https://github.com/grafana/grafana/pull/11354#discussion_r177933449","pull_request_url":"https://api.github.com/repos/grafana/grafana/pulls/11354","author_association":"CONTRIBUTOR","_links":{"self":{"href":"https://api.github.com/repos/grafana/grafana/pulls/comments/177933449"},"html":{"href":"https://github.com/grafana/grafana/pull/11354#discussion_r177933449"},"pull_request":{"href":"https://api.github.com/repos/grafana/grafana/pulls/11354"}},"in_reply_to_id":177385272},"pull_request":{"url":"https://api.github.com/repos/grafana/grafana/pulls/11354","id":176914711,"html_url":"https://github.com/grafana/grafana/pull/11354","diff_url":"https://github.com/grafana/grafana/pull/11354.diff","patch_url":"https://github.com/grafana/grafana/pull/11354.patch","issue_url":"https://api.github.com/repos/grafana/grafana/issues/11354","number":11354,"state":"open","locked":false,"title":"[WIP] External auth refactor","user":{"login":"DanCech","id":1443603,"avatar_url":"https://avatars0.githubusercontent.com/u/1443603?v=4","gravatar_id":"","url":"https://api.github.com/users/DanCech","html_url":"https://github.com/DanCech","followers_url":"https://api.github.com/users/DanCech/followers","following_url":"https://api.github.com/users/DanCech/following{/other_user}","gists_url":"https://api.github.com/users/DanCech/gists{/gist_id}","starred_url":"https://api.github.com/users/DanCech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanCech/subscriptions","organizations_url":"https://api.github.com/users/DanCech/orgs","repos_url":"https://api.github.com/users/DanCech/repos","events_url":"https://api.github.com/users/DanCech/events{/privacy}","received_events_url":"https://api.github.com/users/DanCech/received_events","type":"User","site_admin":false},"body":"This PR aims to bring the code used to synchronize Grafana user accounts with external authentication stores into a single workflow, implemented by the `login.UpsertUser` function.  This accepts a `models.ExternalUserInfo` struct and handles checking whether a local account exists, creating or updating it as necessary, managing org membership, and maintaining entries in the new `user_auth` table to link Grafana user accounts to external user accounts.\r\n\r\nThe tests are still quite lacking, and I'm not sure of the best way to implement those.  It may be easier to test if we implement `bus.DispatchReqCtx` and use that instead of calling `login.UpsertUser` directly, but I'm not sure.\r\n\r\nThere are a few behavior changes involved here, since users authenticating via oauth, auth-proxy and ldap now all go through the same account sync, but I have done my best to make sure that we won't break any existing logins.\r\n\r\nThe new user account linking code will work with ldap (based on DN), authproxy (based on the header value) and grafana.com auth (based on user id).  Other oauth/openid providers will need to be extended to return an Id element to take advantage of the `user_auth` table.\r\n\r\nThe other major change to the authproxy system is to avoid the overhead of looking the user up by username/email on every request, it now stores the proxy header value in the session and only does a lookup if the value changed.\r\n\r\nAll feedback appreciated!","created_at":"2018-03-22T21:28:46Z","updated_at":"2018-03-29T01:28:28Z","closed_at":null,"merged_at":null,"merge_commit_sha":"0a30a75f7f32cf06f9def567e9a78852c45e15c2","assignee":{"login":"DanCech","id":1443603,"avatar_url":"https://avatars0.githubusercontent.com/u/1443603?v=4","gravatar_id":"","url":"https://api.github.com/users/DanCech","html_url":"https://github.com/DanCech","followers_url":"https://api.github.com/users/DanCech/followers","following_url":"https://api.github.com/users/DanCech/following{/other_user}","gists_url":"https://api.github.com/users/DanCech/gists{/gist_id}","starred_url":"https://api.github.com/users/DanCech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanCech/subscriptions","organizations_url":"https://api.github.com/users/DanCech/orgs","repos_url":"https://api.github.com/users/DanCech/repos","events_url":"https://api.github.com/users/DanCech/events{/privacy}","received_events_url":"https://api.github.com/users/DanCech/received_events","type":"User","site_admin":false},"assignees":[{"login":"DanCech","id":1443603,"avatar_url":"https://avatars0.githubusercontent.com/u/1443603?v=4","gravatar_id":"","url":"https://api.github.com/users/DanCech","html_url":"https://github.com/DanCech","followers_url":"https://api.github.com/users/DanCech/followers","following_url":"https://api.github.com/users/DanCech/following{/other_user}","gists_url":"https://api.github.com/users/DanCech/gists{/gist_id}","starred_url":"https://api.github.com/users/DanCech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanCech/subscriptions","organizations_url":"https://api.github.com/users/DanCech/orgs","repos_url":"https://api.github.com/users/DanCech/repos","events_url":"https://api.github.com/users/DanCech/events{/privacy}","received_events_url":"https://api.github.com/users/DanCech/received_events","type":"User","site_admin":false}],"requested_reviewers":[],"requested_teams":[],"labels":[{"id":174917589,"url":"https://api.github.com/repos/grafana/grafana/labels/comp:%20backend/auth","name":"comp: backend/auth","color":"c7def8","default":false},{"id":175790974,"url":"https://api.github.com/repos/grafana/grafana/labels/comp:%20backend/user","name":"comp: backend/user","color":"c7def8","default":false},{"id":188534489,"url":"https://api.github.com/repos/grafana/grafana/labels/in%20progress","name":"in progress","color":"ededed","default":false},{"id":70176320,"url":"https://api.github.com/repos/grafana/grafana/labels/type:%20feature","name":"type: feature","color":"dddddd","default":false},{"id":257666655,"url":"https://api.github.com/repos/grafana/grafana/labels/type:%20refactor","name":"type: refactor","color":"dddddd","default":false}],"milestone":{"url":"https://api.github.com/repos/grafana/grafana/milestones/76","html_url":"https://github.com/grafana/grafana/milestone/76","labels_url":"https://api.github.com/repos/grafana/grafana/milestones/76/labels","id":2863993,"number":76,"title":"5.1","description":"","creator":{"login":"torkelo","id":10999,"avatar_url":"https://avatars3.githubusercontent.com/u/10999?v=4","gravatar_id":"","url":"https://api.github.com/users/torkelo","html_url":"https://github.com/torkelo","followers_url":"https://api.github.com/users/torkelo/followers","following_url":"https://api.github.com/users/torkelo/following{/other_user}","gists_url":"https://api.github.com/users/torkelo/gists{/gist_id}","starred_url":"https://api.github.com/users/torkelo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/torkelo/subscriptions","organizations_url":"https://api.github.com/users/torkelo/orgs","repos_url":"https://api.github.com/users/torkelo/repos","events_url":"https://api.github.com/users/torkelo/events{/privacy}","received_events_url":"https://api.github.com/users/torkelo/received_events","type":"User","site_admin":false},"open_issues":29,"closed_issues":51,"state":"open","created_at":"2017-10-25T06:41:05Z","updated_at":"2018-03-28T20:54:36Z","due_on":null,"closed_at":null},"commits_url":"https://api.github.com/repos/grafana/grafana/pulls/11354/commits","review_comments_url":"https://api.github.com/repos/grafana/grafana/pulls/11354/comments","review_comment_url":"https://api.github.com/repos/grafana/grafana/pulls/comments{/number}","comments_url":"https://api.github.com/repos/grafana/grafana/issues/11354/comments","statuses_url":"https://api.github.com/repos/grafana/grafana/statuses/76b42b9092acad737656c77e5fff2567392d96be","head":{"label":"grafana:external-auth","ref":"external-auth","sha":"76b42b9092acad737656c77e5fff2567392d96be","user":{"login":"grafana","id":7195757,"avatar_url":"https://avatars0.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","site_admin":false},"repo":{"id":15111821,"name":"grafana","full_name":"grafana/grafana","owner":{"login":"grafana","id":7195757,"avatar_url":"https://avatars0.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/grafana/grafana","description":"The tool for beautiful monitoring and metric analytics & dashboards for Graphite, InfluxDB & Prometheus & More","fork":false,"url":"https://api.github.com/repos/grafana/grafana","forks_url":"https://api.github.com/repos/grafana/grafana/forks","keys_url":"https://api.github.com/repos/grafana/grafana/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/grafana/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/grafana/teams","hooks_url":"https://api.github.com/repos/grafana/grafana/hooks","issue_events_url":"https://api.github.com/repos/grafana/grafana/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/grafana/events","assignees_url":"https://api.github.com/repos/grafana/grafana/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/grafana/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/grafana/tags","blobs_url":"https://api.github.com/repos/grafana/grafana/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/grafana/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/grafana/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/grafana/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/grafana/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/grafana/languages","stargazers_url":"https://api.github.com/repos/grafana/grafana/stargazers","contributors_url":"https://api.github.com/repos/grafana/grafana/contributors","subscribers_url":"https://api.github.com/repos/grafana/grafana/subscribers","subscription_url":"https://api.github.com/repos/grafana/grafana/subscription","commits_url":"https://api.github.com/repos/grafana/grafana/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/grafana/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/grafana/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/grafana/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/grafana/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/grafana/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/grafana/merges","archive_url":"https://api.github.com/repos/grafana/grafana/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/grafana/downloads","issues_url":"https://api.github.com/repos/grafana/grafana/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/grafana/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/grafana/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/grafana/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/grafana/labels{/name}","releases_url":"https://api.github.com/repos/grafana/grafana/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/grafana/deployments","created_at":"2013-12-11T15:59:56Z","updated_at":"2018-03-29T00:36:25Z","pushed_at":"2018-03-29T01:27:36Z","git_url":"git://github.com/grafana/grafana.git","ssh_url":"git@github.com:grafana/grafana.git","clone_url":"https://github.com/grafana/grafana.git","svn_url":"https://github.com/grafana/grafana","homepage":"https://grafana.com","size":178776,"stargazers_count":20937,"watchers_count":20937,"language":"TypeScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":3677,"mirror_url":null,"archived":false,"open_issues_count":1429,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0"},"forks":3677,"open_issues":1429,"watchers":20937,"default_branch":"master"}},"base":{"label":"grafana:master","ref":"master","sha":"b41370ca498816f444363ed7511dced638dc54f6","user":{"login":"grafana","id":7195757,"avatar_url":"https://avatars0.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","site_admin":false},"repo":{"id":15111821,"name":"grafana","full_name":"grafana/grafana","owner":{"login":"grafana","id":7195757,"avatar_url":"https://avatars0.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/grafana/grafana","description":"The tool for beautiful monitoring and metric analytics & dashboards for Graphite, InfluxDB & Prometheus & More","fork":false,"url":"https://api.github.com/repos/grafana/grafana","forks_url":"https://api.github.com/repos/grafana/grafana/forks","keys_url":"https://api.github.com/repos/grafana/grafana/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/grafana/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/grafana/teams","hooks_url":"https://api.github.com/repos/grafana/grafana/hooks","issue_events_url":"https://api.github.com/repos/grafana/grafana/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/grafana/events","assignees_url":"https://api.github.com/repos/grafana/grafana/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/grafana/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/grafana/tags","blobs_url":"https://api.github.com/repos/grafana/grafana/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/grafana/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/grafana/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/grafana/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/grafana/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/grafana/languages","stargazers_url":"https://api.github.com/repos/grafana/grafana/stargazers","contributors_url":"https://api.github.com/repos/grafana/grafana/contributors","subscribers_url":"https://api.github.com/repos/grafana/grafana/subscribers","subscription_url":"https://api.github.com/repos/grafana/grafana/subscription","commits_url":"https://api.github.com/repos/grafana/grafana/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/grafana/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/grafana/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/grafana/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/grafana/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/grafana/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/grafana/merges","archive_url":"https://api.github.com/repos/grafana/grafana/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/grafana/downloads","issues_url":"https://api.github.com/repos/grafana/grafana/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/grafana/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/grafana/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/grafana/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/grafana/labels{/name}","releases_url":"https://api.github.com/repos/grafana/grafana/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/grafana/deployments","created_at":"2013-12-11T15:59:56Z","updated_at":"2018-03-29T00:36:25Z","pushed_at":"2018-03-29T01:27:36Z","git_url":"git://github.com/grafana/grafana.git","ssh_url":"git@github.com:grafana/grafana.git","clone_url":"https://github.com/grafana/grafana.git","svn_url":"https://github.com/grafana/grafana","homepage":"https://grafana.com","size":178776,"stargazers_count":20937,"watchers_count":20937,"language":"TypeScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":3677,"mirror_url":null,"archived":false,"open_issues_count":1429,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0"},"forks":3677,"open_issues":1429,"watchers":20937,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/grafana/grafana/pulls/11354"},"html":{"href":"https://github.com/grafana/grafana/pull/11354"},"issue":{"href":"https://api.github.com/repos/grafana/grafana/issues/11354"},"comments":{"href":"https://api.github.com/repos/grafana/grafana/issues/11354/comments"},"review_comments":{"href":"https://api.github.com/repos/grafana/grafana/pulls/11354/comments"},"review_comment":{"href":"https://api.github.com/repos/grafana/grafana/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/grafana/grafana/pulls/11354/commits"},"statuses":{"href":"https://api.github.com/repos/grafana/grafana/statuses/76b42b9092acad737656c77e5fff2567392d96be"}},"author_association":"CONTRIBUTOR"}},"public":true,"created_at":"2018-03-29T01:28:28Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7451196786","type":"PullRequestReviewCommentEvent","actor":{"id":1443603,"login":"DanCech","display_login":"DanCech","gravatar_id":"","url":"https://api.github.com/users/DanCech","avatar_url":"https://avatars.githubusercontent.com/u/1443603?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/grafana/grafana/pulls/comments/177933440","pull_request_review_id":107901900,"id":177933440,"diff_hunk":"@@ -0,0 +1,73 @@\n+package models\n+\n+import (\n+\t\"time\"\n+)\n+\n+type UserAuth struct {\n+\tId         int64\n+\tUserId     int64\n+\tAuthModule string\n+\tAuthId     string\n+\tCreated    time.Time\n+}\n+\n+type ExternalUserInfo struct {\n+\tAuthModule string\n+\tAuthId     string\n+\tUserId     int64\n+\tEmail      string\n+\tLogin      string\n+\tName       string\n+\tOrgRoles   map[int64]RoleType\n+}\n+\n+// ---------------------\n+// COMMANDS\n+\n+type UpsertUserCommand struct {\n+\tReqContext    *ReqContext\n+\tExternalUser  *ExternalUserInfo\n+\tSignupAllowed bool\n+\n+\tResult *User\n+}\n+\n+type SetAuthInfoCommand struct {\n+\tAuthModule string\n+\tAuthId     string\n+\tUserId     int64\n+}\n+\n+type DeleteAuthInfoCommand struct {\n+\tUserAuth *UserAuth\n+}\n+\n+// ----------------------\n+// QUERIES\n+\n+type LoginUserQuery struct {\n+\tReqContext *ReqContext\n+\tUsername   string\n+\tPassword   string\n+\tUser       *User\n+\tIpAddress  string\n+}\n+\n+type GetUserByAuthInfoQuery struct {\n+\tAuthModule string\n+\tAuthId     string\n+\tUserId     int64\n+\tEmail      string\n+\tLogin      string\n+\n+\tUser     *User","path":"pkg/models/user_auth.go","position":null,"original_position":64,"commit_id":"76b42b9092acad737656c77e5fff2567392d96be","original_commit_id":"3127cab9fa70513775f519210fba4c2713fd36fe","user":{"login":"DanCech","id":1443603,"avatar_url":"https://avatars0.githubusercontent.com/u/1443603?v=4","gravatar_id":"","url":"https://api.github.com/users/DanCech","html_url":"https://github.com/DanCech","followers_url":"https://api.github.com/users/DanCech/followers","following_url":"https://api.github.com/users/DanCech/following{/other_user}","gists_url":"https://api.github.com/users/DanCech/gists{/gist_id}","starred_url":"https://api.github.com/users/DanCech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanCech/subscriptions","organizations_url":"https://api.github.com/users/DanCech/orgs","repos_url":"https://api.github.com/users/DanCech/repos","events_url":"https://api.github.com/users/DanCech/events{/privacy}","received_events_url":"https://api.github.com/users/DanCech/received_events","type":"User","site_admin":false},"body":"Restructured so it only has to return Result","created_at":"2018-03-29T01:28:23Z","updated_at":"2018-03-29T01:28:23Z","html_url":"https://github.com/grafana/grafana/pull/11354#discussion_r177933440","pull_request_url":"https://api.github.com/repos/grafana/grafana/pulls/11354","author_association":"CONTRIBUTOR","_links":{"self":{"href":"https://api.github.com/repos/grafana/grafana/pulls/comments/177933440"},"html":{"href":"https://github.com/grafana/grafana/pull/11354#discussion_r177933440"},"pull_request":{"href":"https://api.github.com/repos/grafana/grafana/pulls/11354"}},"in_reply_to_id":177384976},"pull_request":{"url":"https://api.github.com/repos/grafana/grafana/pulls/11354","id":176914711,"html_url":"https://github.com/grafana/grafana/pull/11354","diff_url":"https://github.com/grafana/grafana/pull/11354.diff","patch_url":"https://github.com/grafana/grafana/pull/11354.patch","issue_url":"https://api.github.com/repos/grafana/grafana/issues/11354","number":11354,"state":"open","locked":false,"title":"[WIP] External auth refactor","user":{"login":"DanCech","id":1443603,"avatar_url":"https://avatars0.githubusercontent.com/u/1443603?v=4","gravatar_id":"","url":"https://api.github.com/users/DanCech","html_url":"https://github.com/DanCech","followers_url":"https://api.github.com/users/DanCech/followers","following_url":"https://api.github.com/users/DanCech/following{/other_user}","gists_url":"https://api.github.com/users/DanCech/gists{/gist_id}","starred_url":"https://api.github.com/users/DanCech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanCech/subscriptions","organizations_url":"https://api.github.com/users/DanCech/orgs","repos_url":"https://api.github.com/users/DanCech/repos","events_url":"https://api.github.com/users/DanCech/events{/privacy}","received_events_url":"https://api.github.com/users/DanCech/received_events","type":"User","site_admin":false},"body":"This PR aims to bring the code used to synchronize Grafana user accounts with external authentication stores into a single workflow, implemented by the `login.UpsertUser` function.  This accepts a `models.ExternalUserInfo` struct and handles checking whether a local account exists, creating or updating it as necessary, managing org membership, and maintaining entries in the new `user_auth` table to link Grafana user accounts to external user accounts.\r\n\r\nThe tests are still quite lacking, and I'm not sure of the best way to implement those.  It may be easier to test if we implement `bus.DispatchReqCtx` and use that instead of calling `login.UpsertUser` directly, but I'm not sure.\r\n\r\nThere are a few behavior changes involved here, since users authenticating via oauth, auth-proxy and ldap now all go through the same account sync, but I have done my best to make sure that we won't break any existing logins.\r\n\r\nThe new user account linking code will work with ldap (based on DN), authproxy (based on the header value) and grafana.com auth (based on user id).  Other oauth/openid providers will need to be extended to return an Id element to take advantage of the `user_auth` table.\r\n\r\nThe other major change to the authproxy system is to avoid the overhead of looking the user up by username/email on every request, it now stores the proxy header value in the session and only does a lookup if the value changed.\r\n\r\nAll feedback appreciated!","created_at":"2018-03-22T21:28:46Z","updated_at":"2018-03-29T01:28:23Z","closed_at":null,"merged_at":null,"merge_commit_sha":"0a30a75f7f32cf06f9def567e9a78852c45e15c2","assignee":{"login":"DanCech","id":1443603,"avatar_url":"https://avatars0.githubusercontent.com/u/1443603?v=4","gravatar_id":"","url":"https://api.github.com/users/DanCech","html_url":"https://github.com/DanCech","followers_url":"https://api.github.com/users/DanCech/followers","following_url":"https://api.github.com/users/DanCech/following{/other_user}","gists_url":"https://api.github.com/users/DanCech/gists{/gist_id}","starred_url":"https://api.github.com/users/DanCech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanCech/subscriptions","organizations_url":"https://api.github.com/users/DanCech/orgs","repos_url":"https://api.github.com/users/DanCech/repos","events_url":"https://api.github.com/users/DanCech/events{/privacy}","received_events_url":"https://api.github.com/users/DanCech/received_events","type":"User","site_admin":false},"assignees":[{"login":"DanCech","id":1443603,"avatar_url":"https://avatars0.githubusercontent.com/u/1443603?v=4","gravatar_id":"","url":"https://api.github.com/users/DanCech","html_url":"https://github.com/DanCech","followers_url":"https://api.github.com/users/DanCech/followers","following_url":"https://api.github.com/users/DanCech/following{/other_user}","gists_url":"https://api.github.com/users/DanCech/gists{/gist_id}","starred_url":"https://api.github.com/users/DanCech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanCech/subscriptions","organizations_url":"https://api.github.com/users/DanCech/orgs","repos_url":"https://api.github.com/users/DanCech/repos","events_url":"https://api.github.com/users/DanCech/events{/privacy}","received_events_url":"https://api.github.com/users/DanCech/received_events","type":"User","site_admin":false}],"requested_reviewers":[],"requested_teams":[],"labels":[{"id":174917589,"url":"https://api.github.com/repos/grafana/grafana/labels/comp:%20backend/auth","name":"comp: backend/auth","color":"c7def8","default":false},{"id":175790974,"url":"https://api.github.com/repos/grafana/grafana/labels/comp:%20backend/user","name":"comp: backend/user","color":"c7def8","default":false},{"id":188534489,"url":"https://api.github.com/repos/grafana/grafana/labels/in%20progress","name":"in progress","color":"ededed","default":false},{"id":70176320,"url":"https://api.github.com/repos/grafana/grafana/labels/type:%20feature","name":"type: feature","color":"dddddd","default":false},{"id":257666655,"url":"https://api.github.com/repos/grafana/grafana/labels/type:%20refactor","name":"type: refactor","color":"dddddd","default":false}],"milestone":{"url":"https://api.github.com/repos/grafana/grafana/milestones/76","html_url":"https://github.com/grafana/grafana/milestone/76","labels_url":"https://api.github.com/repos/grafana/grafana/milestones/76/labels","id":2863993,"number":76,"title":"5.1","description":"","creator":{"login":"torkelo","id":10999,"avatar_url":"https://avatars3.githubusercontent.com/u/10999?v=4","gravatar_id":"","url":"https://api.github.com/users/torkelo","html_url":"https://github.com/torkelo","followers_url":"https://api.github.com/users/torkelo/followers","following_url":"https://api.github.com/users/torkelo/following{/other_user}","gists_url":"https://api.github.com/users/torkelo/gists{/gist_id}","starred_url":"https://api.github.com/users/torkelo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/torkelo/subscriptions","organizations_url":"https://api.github.com/users/torkelo/orgs","repos_url":"https://api.github.com/users/torkelo/repos","events_url":"https://api.github.com/users/torkelo/events{/privacy}","received_events_url":"https://api.github.com/users/torkelo/received_events","type":"User","site_admin":false},"open_issues":29,"closed_issues":51,"state":"open","created_at":"2017-10-25T06:41:05Z","updated_at":"2018-03-28T20:54:36Z","due_on":null,"closed_at":null},"commits_url":"https://api.github.com/repos/grafana/grafana/pulls/11354/commits","review_comments_url":"https://api.github.com/repos/grafana/grafana/pulls/11354/comments","review_comment_url":"https://api.github.com/repos/grafana/grafana/pulls/comments{/number}","comments_url":"https://api.github.com/repos/grafana/grafana/issues/11354/comments","statuses_url":"https://api.github.com/repos/grafana/grafana/statuses/76b42b9092acad737656c77e5fff2567392d96be","head":{"label":"grafana:external-auth","ref":"external-auth","sha":"76b42b9092acad737656c77e5fff2567392d96be","user":{"login":"grafana","id":7195757,"avatar_url":"https://avatars0.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","site_admin":false},"repo":{"id":15111821,"name":"grafana","full_name":"grafana/grafana","owner":{"login":"grafana","id":7195757,"avatar_url":"https://avatars0.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/grafana/grafana","description":"The tool for beautiful monitoring and metric analytics & dashboards for Graphite, InfluxDB & Prometheus & More","fork":false,"url":"https://api.github.com/repos/grafana/grafana","forks_url":"https://api.github.com/repos/grafana/grafana/forks","keys_url":"https://api.github.com/repos/grafana/grafana/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/grafana/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/grafana/teams","hooks_url":"https://api.github.com/repos/grafana/grafana/hooks","issue_events_url":"https://api.github.com/repos/grafana/grafana/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/grafana/events","assignees_url":"https://api.github.com/repos/grafana/grafana/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/grafana/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/grafana/tags","blobs_url":"https://api.github.com/repos/grafana/grafana/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/grafana/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/grafana/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/grafana/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/grafana/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/grafana/languages","stargazers_url":"https://api.github.com/repos/grafana/grafana/stargazers","contributors_url":"https://api.github.com/repos/grafana/grafana/contributors","subscribers_url":"https://api.github.com/repos/grafana/grafana/subscribers","subscription_url":"https://api.github.com/repos/grafana/grafana/subscription","commits_url":"https://api.github.com/repos/grafana/grafana/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/grafana/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/grafana/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/grafana/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/grafana/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/grafana/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/grafana/merges","archive_url":"https://api.github.com/repos/grafana/grafana/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/grafana/downloads","issues_url":"https://api.github.com/repos/grafana/grafana/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/grafana/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/grafana/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/grafana/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/grafana/labels{/name}","releases_url":"https://api.github.com/repos/grafana/grafana/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/grafana/deployments","created_at":"2013-12-11T15:59:56Z","updated_at":"2018-03-29T00:36:25Z","pushed_at":"2018-03-29T01:27:36Z","git_url":"git://github.com/grafana/grafana.git","ssh_url":"git@github.com:grafana/grafana.git","clone_url":"https://github.com/grafana/grafana.git","svn_url":"https://github.com/grafana/grafana","homepage":"https://grafana.com","size":178776,"stargazers_count":20937,"watchers_count":20937,"language":"TypeScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":3677,"mirror_url":null,"archived":false,"open_issues_count":1429,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0"},"forks":3677,"open_issues":1429,"watchers":20937,"default_branch":"master"}},"base":{"label":"grafana:master","ref":"master","sha":"b41370ca498816f444363ed7511dced638dc54f6","user":{"login":"grafana","id":7195757,"avatar_url":"https://avatars0.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","site_admin":false},"repo":{"id":15111821,"name":"grafana","full_name":"grafana/grafana","owner":{"login":"grafana","id":7195757,"avatar_url":"https://avatars0.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/grafana/grafana","description":"The tool for beautiful monitoring and metric analytics & dashboards for Graphite, InfluxDB & Prometheus & More","fork":false,"url":"https://api.github.com/repos/grafana/grafana","forks_url":"https://api.github.com/repos/grafana/grafana/forks","keys_url":"https://api.github.com/repos/grafana/grafana/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/grafana/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/grafana/teams","hooks_url":"https://api.github.com/repos/grafana/grafana/hooks","issue_events_url":"https://api.github.com/repos/grafana/grafana/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/grafana/events","assignees_url":"https://api.github.com/repos/grafana/grafana/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/grafana/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/grafana/tags","blobs_url":"https://api.github.com/repos/grafana/grafana/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/grafana/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/grafana/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/grafana/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/grafana/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/grafana/languages","stargazers_url":"https://api.github.com/repos/grafana/grafana/stargazers","contributors_url":"https://api.github.com/repos/grafana/grafana/contributors","subscribers_url":"https://api.github.com/repos/grafana/grafana/subscribers","subscription_url":"https://api.github.com/repos/grafana/grafana/subscription","commits_url":"https://api.github.com/repos/grafana/grafana/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/grafana/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/grafana/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/grafana/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/grafana/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/grafana/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/grafana/merges","archive_url":"https://api.github.com/repos/grafana/grafana/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/grafana/downloads","issues_url":"https://api.github.com/repos/grafana/grafana/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/grafana/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/grafana/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/grafana/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/grafana/labels{/name}","releases_url":"https://api.github.com/repos/grafana/grafana/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/grafana/deployments","created_at":"2013-12-11T15:59:56Z","updated_at":"2018-03-29T00:36:25Z","pushed_at":"2018-03-29T01:27:36Z","git_url":"git://github.com/grafana/grafana.git","ssh_url":"git@github.com:grafana/grafana.git","clone_url":"https://github.com/grafana/grafana.git","svn_url":"https://github.com/grafana/grafana","homepage":"https://grafana.com","size":178776,"stargazers_count":20937,"watchers_count":20937,"language":"TypeScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":3677,"mirror_url":null,"archived":false,"open_issues_count":1429,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0"},"forks":3677,"open_issues":1429,"watchers":20937,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/grafana/grafana/pulls/11354"},"html":{"href":"https://github.com/grafana/grafana/pull/11354"},"issue":{"href":"https://api.github.com/repos/grafana/grafana/issues/11354"},"comments":{"href":"https://api.github.com/repos/grafana/grafana/issues/11354/comments"},"review_comments":{"href":"https://api.github.com/repos/grafana/grafana/pulls/11354/comments"},"review_comment":{"href":"https://api.github.com/repos/grafana/grafana/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/grafana/grafana/pulls/11354/commits"},"statuses":{"href":"https://api.github.com/repos/grafana/grafana/statuses/76b42b9092acad737656c77e5fff2567392d96be"}},"author_association":"CONTRIBUTOR"}},"public":true,"created_at":"2018-03-29T01:28:23Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}},{"id":"7451196226","type":"PullRequestReviewCommentEvent","actor":{"id":1443603,"login":"DanCech","display_login":"DanCech","gravatar_id":"","url":"https://api.github.com/users/DanCech","avatar_url":"https://avatars.githubusercontent.com/u/1443603?"},"repo":{"id":15111821,"name":"grafana/grafana","url":"https://api.github.com/repos/grafana/grafana"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/grafana/grafana/pulls/comments/177933416","pull_request_review_id":107901876,"id":177933416,"diff_hunk":"@@ -0,0 +1,133 @@\n+package sqlstore\n+\n+import (\n+\t\"time\"\n+\n+\t\"github.com/grafana/grafana/pkg/bus\"\n+\tm \"github.com/grafana/grafana/pkg/models\"\n+)\n+\n+func init() {\n+\tbus.AddHandler(\"sql\", GetUserByAuthInfo)\n+\tbus.AddHandler(\"sql\", GetAuthInfo)\n+\tbus.AddHandler(\"sql\", SetAuthInfo)\n+\tbus.AddHandler(\"sql\", DeleteAuthInfo)\n+}\n+\n+func GetUserByAuthInfo(query *m.GetUserByAuthInfoQuery) error {\n+\tuser := &m.User{}\n+\thas := false\n+\tvar err error\n+\n+\t// Try to find the user by auth module and id first\n+\tif query.AuthModule != \"\" && query.AuthId != \"\" {\n+\t\tauthQuery := &m.GetAuthInfoQuery{\n+\t\t\tAuthModule: query.AuthModule,\n+\t\t\tAuthId:     query.AuthId,\n+\t\t}\n+\n+\t\terr = GetAuthInfo(authQuery)\n+\t\t// if user id was specified and doesn't match the user_auth entry, remove it\n+\t\tif err == nil && query.UserId != 0 && query.UserId != authQuery.UserAuth.UserId {\n+\t\t\tDeleteAuthInfo(&m.DeleteAuthInfoCommand{\n+\t\t\t\tUserAuth: authQuery.UserAuth,\n+\t\t\t})\n+\t\t} else if err == nil {\n+\t\t\thas, err = x.Id(authQuery.UserAuth.UserId).Get(user)\n+\t\t\tif err != nil {\n+\t\t\t\treturn err\n+\t\t\t}\n+\n+\t\t\tif has {\n+\t\t\t\tquery.UserAuth = authQuery.UserAuth\n+\t\t\t} else {\n+\t\t\t\t// if the user has been deleted then remove the entry\n+\t\t\t\tDeleteAuthInfo(&m.DeleteAuthInfoCommand{\n+\t\t\t\t\tUserAuth: authQuery.UserAuth,\n+\t\t\t\t})\n+\t\t\t}\n+\t\t} else if err != m.ErrUserNotFound {\n+\t\t\treturn err\n+\t\t}\n+\t}\n+\n+\t// If not found, try to find the user by id\n+\tif !has && query.UserId != 0 {\n+\t\thas, err = x.Id(query.UserId).Get(user)\n+\t\tif err != nil {\n+\t\t\treturn err\n+\t\t}\n+\t}\n+\n+\t// If not found, try to find the user by email address\n+\tif !has && query.Email != \"\" {\n+\t\tuser = &m.User{Email: query.Email}\n+\t\thas, err = x.Get(user)\n+\t\tif err != nil {\n+\t\t\treturn err\n+\t\t}\n+\t}\n+\n+\t// If not found, try to find the user by login\n+\tif !has && query.Login != \"\" {\n+\t\tuser = &m.User{Login: query.Login}\n+\t\thas, err = x.Get(user)\n+\t\tif err != nil {\n+\t\t\treturn err\n+\t\t}\n+\t}\n+\n+\t// No user found\n+\tif !has {\n+\t\treturn m.ErrUserNotFound\n+\t}\n+\n+\tquery.User = user\n+\treturn nil\n+}\n+\n+func GetAuthInfo(query *m.GetAuthInfoQuery) error {\n+\tuserAuth := &m.UserAuth{\n+\t\tAuthModule: query.AuthModule,\n+\t\tAuthId:     query.AuthId,\n+\t}\n+\thas, err := x.Get(userAuth)\n+\tif err != nil {\n+\t\treturn err\n+\t}\n+\tif !has {\n+\t\treturn m.ErrUserNotFound\n+\t}\n+\n+\tquery.UserAuth = userAuth\n+\treturn nil\n+}\n+\n+func SetAuthInfo(cmd *m.SetAuthInfoCommand) error {\n+\treturn inTransaction(func(sess *DBSession) error {\n+\t\tauthUser := m.UserAuth{\n+\t\t\tUserId:     cmd.UserId,\n+\t\t\tAuthModule: cmd.AuthModule,\n+\t\t\tAuthId:     cmd.AuthId,\n+\t\t\tCreated:    time.Now(),\n+\t\t}\n+\n+\t\t_, err := sess.Insert(&authUser)\n+\t\tif err != nil {\n+\t\t\treturn err\n+\t\t}\n+\n+\t\treturn nil\n+\t})\n+}\n+\n+func DeleteAuthInfo(cmd *m.DeleteAuthInfoCommand) error {\n+\treturn inTransaction(func(sess *DBSession) error {\n+\t\t_, err := sess.Delete(cmd.UserAuth)\n+\t\tif err != nil {","path":"pkg/services/sqlstore/user_auth.go","position":null,"original_position":127,"commit_id":"76b42b9092acad737656c77e5fff2567392d96be","original_commit_id":"3127cab9fa70513775f519210fba4c2713fd36fe","user":{"login":"DanCech","id":1443603,"avatar_url":"https://avatars0.githubusercontent.com/u/1443603?v=4","gravatar_id":"","url":"https://api.github.com/users/DanCech","html_url":"https://github.com/DanCech","followers_url":"https://api.github.com/users/DanCech/followers","following_url":"https://api.github.com/users/DanCech/following{/other_user}","gists_url":"https://api.github.com/users/DanCech/gists{/gist_id}","starred_url":"https://api.github.com/users/DanCech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanCech/subscriptions","organizations_url":"https://api.github.com/users/DanCech/orgs","repos_url":"https://api.github.com/users/DanCech/repos","events_url":"https://api.github.com/users/DanCech/events{/privacy}","received_events_url":"https://api.github.com/users/DanCech/received_events","type":"User","site_admin":false},"body":"Done","created_at":"2018-03-29T01:28:10Z","updated_at":"2018-03-29T01:28:10Z","html_url":"https://github.com/grafana/grafana/pull/11354#discussion_r177933416","pull_request_url":"https://api.github.com/repos/grafana/grafana/pulls/11354","author_association":"CONTRIBUTOR","_links":{"self":{"href":"https://api.github.com/repos/grafana/grafana/pulls/comments/177933416"},"html":{"href":"https://github.com/grafana/grafana/pull/11354#discussion_r177933416"},"pull_request":{"href":"https://api.github.com/repos/grafana/grafana/pulls/11354"}},"in_reply_to_id":177384039},"pull_request":{"url":"https://api.github.com/repos/grafana/grafana/pulls/11354","id":176914711,"html_url":"https://github.com/grafana/grafana/pull/11354","diff_url":"https://github.com/grafana/grafana/pull/11354.diff","patch_url":"https://github.com/grafana/grafana/pull/11354.patch","issue_url":"https://api.github.com/repos/grafana/grafana/issues/11354","number":11354,"state":"open","locked":false,"title":"[WIP] External auth refactor","user":{"login":"DanCech","id":1443603,"avatar_url":"https://avatars0.githubusercontent.com/u/1443603?v=4","gravatar_id":"","url":"https://api.github.com/users/DanCech","html_url":"https://github.com/DanCech","followers_url":"https://api.github.com/users/DanCech/followers","following_url":"https://api.github.com/users/DanCech/following{/other_user}","gists_url":"https://api.github.com/users/DanCech/gists{/gist_id}","starred_url":"https://api.github.com/users/DanCech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanCech/subscriptions","organizations_url":"https://api.github.com/users/DanCech/orgs","repos_url":"https://api.github.com/users/DanCech/repos","events_url":"https://api.github.com/users/DanCech/events{/privacy}","received_events_url":"https://api.github.com/users/DanCech/received_events","type":"User","site_admin":false},"body":"This PR aims to bring the code used to synchronize Grafana user accounts with external authentication stores into a single workflow, implemented by the `login.UpsertUser` function.  This accepts a `models.ExternalUserInfo` struct and handles checking whether a local account exists, creating or updating it as necessary, managing org membership, and maintaining entries in the new `user_auth` table to link Grafana user accounts to external user accounts.\r\n\r\nThe tests are still quite lacking, and I'm not sure of the best way to implement those.  It may be easier to test if we implement `bus.DispatchReqCtx` and use that instead of calling `login.UpsertUser` directly, but I'm not sure.\r\n\r\nThere are a few behavior changes involved here, since users authenticating via oauth, auth-proxy and ldap now all go through the same account sync, but I have done my best to make sure that we won't break any existing logins.\r\n\r\nThe new user account linking code will work with ldap (based on DN), authproxy (based on the header value) and grafana.com auth (based on user id).  Other oauth/openid providers will need to be extended to return an Id element to take advantage of the `user_auth` table.\r\n\r\nThe other major change to the authproxy system is to avoid the overhead of looking the user up by username/email on every request, it now stores the proxy header value in the session and only does a lookup if the value changed.\r\n\r\nAll feedback appreciated!","created_at":"2018-03-22T21:28:46Z","updated_at":"2018-03-29T01:28:10Z","closed_at":null,"merged_at":null,"merge_commit_sha":"0a30a75f7f32cf06f9def567e9a78852c45e15c2","assignee":{"login":"DanCech","id":1443603,"avatar_url":"https://avatars0.githubusercontent.com/u/1443603?v=4","gravatar_id":"","url":"https://api.github.com/users/DanCech","html_url":"https://github.com/DanCech","followers_url":"https://api.github.com/users/DanCech/followers","following_url":"https://api.github.com/users/DanCech/following{/other_user}","gists_url":"https://api.github.com/users/DanCech/gists{/gist_id}","starred_url":"https://api.github.com/users/DanCech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanCech/subscriptions","organizations_url":"https://api.github.com/users/DanCech/orgs","repos_url":"https://api.github.com/users/DanCech/repos","events_url":"https://api.github.com/users/DanCech/events{/privacy}","received_events_url":"https://api.github.com/users/DanCech/received_events","type":"User","site_admin":false},"assignees":[{"login":"DanCech","id":1443603,"avatar_url":"https://avatars0.githubusercontent.com/u/1443603?v=4","gravatar_id":"","url":"https://api.github.com/users/DanCech","html_url":"https://github.com/DanCech","followers_url":"https://api.github.com/users/DanCech/followers","following_url":"https://api.github.com/users/DanCech/following{/other_user}","gists_url":"https://api.github.com/users/DanCech/gists{/gist_id}","starred_url":"https://api.github.com/users/DanCech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanCech/subscriptions","organizations_url":"https://api.github.com/users/DanCech/orgs","repos_url":"https://api.github.com/users/DanCech/repos","events_url":"https://api.github.com/users/DanCech/events{/privacy}","received_events_url":"https://api.github.com/users/DanCech/received_events","type":"User","site_admin":false}],"requested_reviewers":[],"requested_teams":[],"labels":[{"id":174917589,"url":"https://api.github.com/repos/grafana/grafana/labels/comp:%20backend/auth","name":"comp: backend/auth","color":"c7def8","default":false},{"id":175790974,"url":"https://api.github.com/repos/grafana/grafana/labels/comp:%20backend/user","name":"comp: backend/user","color":"c7def8","default":false},{"id":188534489,"url":"https://api.github.com/repos/grafana/grafana/labels/in%20progress","name":"in progress","color":"ededed","default":false},{"id":70176320,"url":"https://api.github.com/repos/grafana/grafana/labels/type:%20feature","name":"type: feature","color":"dddddd","default":false},{"id":257666655,"url":"https://api.github.com/repos/grafana/grafana/labels/type:%20refactor","name":"type: refactor","color":"dddddd","default":false}],"milestone":{"url":"https://api.github.com/repos/grafana/grafana/milestones/76","html_url":"https://github.com/grafana/grafana/milestone/76","labels_url":"https://api.github.com/repos/grafana/grafana/milestones/76/labels","id":2863993,"number":76,"title":"5.1","description":"","creator":{"login":"torkelo","id":10999,"avatar_url":"https://avatars3.githubusercontent.com/u/10999?v=4","gravatar_id":"","url":"https://api.github.com/users/torkelo","html_url":"https://github.com/torkelo","followers_url":"https://api.github.com/users/torkelo/followers","following_url":"https://api.github.com/users/torkelo/following{/other_user}","gists_url":"https://api.github.com/users/torkelo/gists{/gist_id}","starred_url":"https://api.github.com/users/torkelo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/torkelo/subscriptions","organizations_url":"https://api.github.com/users/torkelo/orgs","repos_url":"https://api.github.com/users/torkelo/repos","events_url":"https://api.github.com/users/torkelo/events{/privacy}","received_events_url":"https://api.github.com/users/torkelo/received_events","type":"User","site_admin":false},"open_issues":29,"closed_issues":51,"state":"open","created_at":"2017-10-25T06:41:05Z","updated_at":"2018-03-28T20:54:36Z","due_on":null,"closed_at":null},"commits_url":"https://api.github.com/repos/grafana/grafana/pulls/11354/commits","review_comments_url":"https://api.github.com/repos/grafana/grafana/pulls/11354/comments","review_comment_url":"https://api.github.com/repos/grafana/grafana/pulls/comments{/number}","comments_url":"https://api.github.com/repos/grafana/grafana/issues/11354/comments","statuses_url":"https://api.github.com/repos/grafana/grafana/statuses/76b42b9092acad737656c77e5fff2567392d96be","head":{"label":"grafana:external-auth","ref":"external-auth","sha":"76b42b9092acad737656c77e5fff2567392d96be","user":{"login":"grafana","id":7195757,"avatar_url":"https://avatars0.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","site_admin":false},"repo":{"id":15111821,"name":"grafana","full_name":"grafana/grafana","owner":{"login":"grafana","id":7195757,"avatar_url":"https://avatars0.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/grafana/grafana","description":"The tool for beautiful monitoring and metric analytics & dashboards for Graphite, InfluxDB & Prometheus & More","fork":false,"url":"https://api.github.com/repos/grafana/grafana","forks_url":"https://api.github.com/repos/grafana/grafana/forks","keys_url":"https://api.github.com/repos/grafana/grafana/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/grafana/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/grafana/teams","hooks_url":"https://api.github.com/repos/grafana/grafana/hooks","issue_events_url":"https://api.github.com/repos/grafana/grafana/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/grafana/events","assignees_url":"https://api.github.com/repos/grafana/grafana/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/grafana/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/grafana/tags","blobs_url":"https://api.github.com/repos/grafana/grafana/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/grafana/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/grafana/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/grafana/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/grafana/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/grafana/languages","stargazers_url":"https://api.github.com/repos/grafana/grafana/stargazers","contributors_url":"https://api.github.com/repos/grafana/grafana/contributors","subscribers_url":"https://api.github.com/repos/grafana/grafana/subscribers","subscription_url":"https://api.github.com/repos/grafana/grafana/subscription","commits_url":"https://api.github.com/repos/grafana/grafana/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/grafana/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/grafana/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/grafana/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/grafana/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/grafana/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/grafana/merges","archive_url":"https://api.github.com/repos/grafana/grafana/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/grafana/downloads","issues_url":"https://api.github.com/repos/grafana/grafana/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/grafana/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/grafana/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/grafana/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/grafana/labels{/name}","releases_url":"https://api.github.com/repos/grafana/grafana/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/grafana/deployments","created_at":"2013-12-11T15:59:56Z","updated_at":"2018-03-29T00:36:25Z","pushed_at":"2018-03-29T01:27:36Z","git_url":"git://github.com/grafana/grafana.git","ssh_url":"git@github.com:grafana/grafana.git","clone_url":"https://github.com/grafana/grafana.git","svn_url":"https://github.com/grafana/grafana","homepage":"https://grafana.com","size":178776,"stargazers_count":20937,"watchers_count":20937,"language":"TypeScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":3677,"mirror_url":null,"archived":false,"open_issues_count":1429,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0"},"forks":3677,"open_issues":1429,"watchers":20937,"default_branch":"master"}},"base":{"label":"grafana:master","ref":"master","sha":"b41370ca498816f444363ed7511dced638dc54f6","user":{"login":"grafana","id":7195757,"avatar_url":"https://avatars0.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","site_admin":false},"repo":{"id":15111821,"name":"grafana","full_name":"grafana/grafana","owner":{"login":"grafana","id":7195757,"avatar_url":"https://avatars0.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/grafana/grafana","description":"The tool for beautiful monitoring and metric analytics & dashboards for Graphite, InfluxDB & Prometheus & More","fork":false,"url":"https://api.github.com/repos/grafana/grafana","forks_url":"https://api.github.com/repos/grafana/grafana/forks","keys_url":"https://api.github.com/repos/grafana/grafana/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/grafana/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/grafana/teams","hooks_url":"https://api.github.com/repos/grafana/grafana/hooks","issue_events_url":"https://api.github.com/repos/grafana/grafana/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/grafana/events","assignees_url":"https://api.github.com/repos/grafana/grafana/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/grafana/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/grafana/tags","blobs_url":"https://api.github.com/repos/grafana/grafana/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/grafana/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/grafana/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/grafana/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/grafana/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/grafana/languages","stargazers_url":"https://api.github.com/repos/grafana/grafana/stargazers","contributors_url":"https://api.github.com/repos/grafana/grafana/contributors","subscribers_url":"https://api.github.com/repos/grafana/grafana/subscribers","subscription_url":"https://api.github.com/repos/grafana/grafana/subscription","commits_url":"https://api.github.com/repos/grafana/grafana/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/grafana/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/grafana/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/grafana/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/grafana/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/grafana/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/grafana/merges","archive_url":"https://api.github.com/repos/grafana/grafana/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/grafana/downloads","issues_url":"https://api.github.com/repos/grafana/grafana/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/grafana/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/grafana/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/grafana/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/grafana/labels{/name}","releases_url":"https://api.github.com/repos/grafana/grafana/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/grafana/deployments","created_at":"2013-12-11T15:59:56Z","updated_at":"2018-03-29T00:36:25Z","pushed_at":"2018-03-29T01:27:36Z","git_url":"git://github.com/grafana/grafana.git","ssh_url":"git@github.com:grafana/grafana.git","clone_url":"https://github.com/grafana/grafana.git","svn_url":"https://github.com/grafana/grafana","homepage":"https://grafana.com","size":178776,"stargazers_count":20937,"watchers_count":20937,"language":"TypeScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":3677,"mirror_url":null,"archived":false,"open_issues_count":1429,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0"},"forks":3677,"open_issues":1429,"watchers":20937,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/grafana/grafana/pulls/11354"},"html":{"href":"https://github.com/grafana/grafana/pull/11354"},"issue":{"href":"https://api.github.com/repos/grafana/grafana/issues/11354"},"comments":{"href":"https://api.github.com/repos/grafana/grafana/issues/11354/comments"},"review_comments":{"href":"https://api.github.com/repos/grafana/grafana/pulls/11354/comments"},"review_comment":{"href":"https://api.github.com/repos/grafana/grafana/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/grafana/grafana/pulls/11354/commits"},"statuses":{"href":"https://api.github.com/repos/grafana/grafana/statuses/76b42b9092acad737656c77e5fff2567392d96be"}},"author_association":"CONTRIBUTOR"}},"public":true,"created_at":"2018-03-29T01:28:10Z","org":{"id":7195757,"login":"grafana","gravatar_id":"","url":"https://api.github.com/orgs/grafana","avatar_url":"https://avatars.githubusercontent.com/u/7195757?"}}]